* Design Document for ECClient (Exchange Connectivity Client) library.

* ECClient Modules
  - GSClient : For Mercury Connectivity through GS
  - LoadBalancer  
  - FaultTolerance
  - Recovery 
  
* Configuration
  - Timeouts
    - ConnectionTimeout
    - ConnectPolicy
      - ConnectAll
      - ConnectMin
      - ConnectAnyOne
        - NumberOfServers      
    - ReconnectPolicy
      - ReconnectTimeout
      - NumberOfReconnects
      - ReconnectDelay
  - LoadBalancing
    - DistributionPolicy --> enum { RoundRobin, FirstDiscovered, All }
  - Interst and Cabalilities [TODO] look for the difference
    - Interest
    - Capabilities        
  - Recovery { Yes/No }
    - RecoveryPolicy enum {Auto, Mannual}
      * Auto: EXClient will persist the last recovery points and recover when application comes up after a crash.
      * Mannual: Client will persist and provide the recovery points. (Scenario : Some (slow) clients do not process the message immediately they buffer it. 
	                                                                          In this case if application goes down and ECClient will recover from the last recovery point then 
	                                                                          client will miss the messages which are not processed(only buffered). 
 
* ECClient Interface
  - Connect (service capabilities and interest)
  - Connect (array of service addresses and topic)
  - Close   ()
  - ConnectionTimeout
  - Callbacks
    - OnConnected (array of ServicesInfo) --> ServiceInfo will contain address topic and other service specific information 
    - OnDisconnected (array of Services)
    - OnMessage (IMessage) --> Need to discuss on the Generic IMessage
    - OnRecoveryStatus (RecoveryState, reference of RecoveryPoints ) enum {Begin, Running, End) // On Init client can set the recovery points      
  - Send  

* LoadBalancer Interface
  - SendRoundRobin (IMessage)
  - SendAll (IMessage)
  - Send (IMessage)


  
* Test Cases
** Test cases for Product Line and ECClient library Interaction.

|------------+--------------------------------------------------------+--------------+----------------------------------------------------------------------------+-----------+-----------------+----------------+---------------+--------+-------|
| Test Case# | Test Title                                             | Test Summary | Test Steps                                                                 | Test Data | Expected Result | Post-condition | Actual Result | Status | Notes |
|------------+--------------------------------------------------------+--------------+----------------------------------------------------------------------------+-----------+-----------------+----------------+---------------+--------+-------|
|          1 | Connect to the nearest GS                              |              | (1) Check if GS is running locally. Connect to Local GS                    |           |                 |                |               |        |       |
|            |                                                        |              | (2) Call Resolve. If multiple GS are returned,  connect to the nearest GS. |           |                 |                |               |        |       |
|------------+--------------------------------------------------------+--------------+----------------------------------------------------------------------------+-----------+-----------------+----------------+---------------+--------+-------|
|          2 | GS goes down and ownership is transfered to another GS |              | (1) Notify reconnect status to client                                      |           |                 |                |               |        |       |
|            |                                                        |              |                                                                            |           |                 |                |               |        |       |

** Test cases for MCClient and Guardian Service Interaction.
|------------+------------+--------------+------------+-----------+-----------------+----------------+---------------+--------+-------|
| Test Case# | Test Title | Test Summary | Test Steps | Test Data | Expected Result | Post-condition | Actual Result | Status | Notes |
|------------+------------+--------------+------------+-----------+-----------------+----------------+---------------+--------+-------|
|          1 |            |              |            |           |                 |                |               |        |       |

