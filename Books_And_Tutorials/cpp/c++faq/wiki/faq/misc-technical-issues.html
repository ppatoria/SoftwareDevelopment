<!doctype html>
<html lang="en">
  
<!-- Mirrored from isocpp.org/wiki/faq/misc-technical-issues by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 01 Aug 2015 12:41:46 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <title>
            Standard C++
    </title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link href="../../favicon.ico" rel="shortcut icon" />
    <link rel="apple-touch-icon" href="apple-touch-icon-57.html" />
    <link rel="apple-touch-icon" sizes="72x72" href="apple-touch-icon-72.html" />
    <link rel="apple-touch-icon" sizes="114x114" href="apple-touch-icon-114.html" />
    <link rel="apple-touch-icon" sizes="144x144" href="apple-touch-icon-144.html" />
    
    <link href="../../indexe9db.html?css=stylesheets/prettify" rel="stylesheet" media="all" type="text/css" />
    <script type="text/javascript" src="../../../cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
    
    <link href="../../index6bd3.html?css=stylesheets/screen" rel="stylesheet" media="all" type="text/css" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <script src="../../mint/index3298.html?js" type="text/javascript"></script>
    
    <script type="text/javascript" src="../../../use.typekit.com/kml7swa.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
    
  </head>
  
  <body class="hide-sidebar">
    <div id="root">
    
      <div id="crown">
        <a id="sidebar-toggle" href="#sidebar">Show sidebar &raquo;</a>
        <ul class="user">
                          <li><a href="../../member/login.html">Sign In</a></li>
          <li><a href="../../member/register.html">Register</a></li>
                </ul>
      </div>

      <header id="top" role="banner">
        <div class="container">
          <h1>
            <a href="../../index.html"><img src="../../images/uploads/logo-sun.jpg" alt="Standard C++" /></a>
          </h1>
          <nav role="navigation">
            <ul id="nav-sub">
<li class="first"><a href="../../get-started.html">Get Started!</a></li>
<li><a href="../../tour.html">Tour</a></li>
<li><a href="../../faq.html">C++ Super-FAQ</a></li>
<li><a href="../../blog.html">Blog</a></li>
<li><a href="../../forums.html">Forums</a></li>
<li><a href="../../std.html">Standardization</a></li>
<li class="last"><a href="../../about.html">About</a></li>
</ul>
          </nav>
          <form action="https://isocpp.org/search/google">
            <input type="text" name="q" id="q" maxlength="100" value="" class="textbox" />
            <input type="submit" value="Search" class="button" />
          </form>
          <!--
          <form method="post" action="https://isocpp.org/"  >
<div class='hiddenFields'>
<input type="hidden" name="ACT" value="6" />
<input type="hidden" name="XID" value="281049a6fa66845b8b9a8e320a7dd729c1fc036e" />
<input type="hidden" name="RES" value="" />
<input type="hidden" name="meta" value="zYMKgX58Zs8+1aclN9tC7heLzqeMS/BIDf2KWaqfUPy9IuEVYHdFD1dlGh34VWoTLfYfqx2VVNOeAsrIgIvvoFDyH5RKx1rRrjSIJmrlV4WTNhwE+/Onu3ISLsbzAk2awqSU6A+hVvt+f/zJn30d7+qnYdsX9iFLWu40TELdyhIN7OvZg7LuJknFB0gZ7nQTklJ/9coWuk9SURbQpuERR2hTSI2C5xLtlwfiI61PqkKwyrlOKG6XDMBSEtvAIHOCp+adyiqHkYhNSPC8wgrdUEXu/O1ACVY3yqa/hYv3qY5COcgp3UflhKiNqQvGfAikDLrb28Jq5FJxzSTO4kcq1kRWnkMAIa+DJDX1Ri9lxnSoesPEDjJwSIcqjcXXIxh1l0qg2xNSdmuOrE+KB+C8x3zG6M/Rmrrfc9CHMGWIs3c=" />
<input type="hidden" name="site_id" value="1" />
</div>


            <input type="text" name="keywords" id="keywords" maxlength="100" value="M50o93H7pQ09L8X1t49cHY01Z5j4TT91fGfr" class="textbox" />
            <input type="submit" value="Search" class="button" />
          </form>
          -->
        </div>
      </header>

      <div id="content" class="hide-sidebar" role="main">
        <div class="container">
    
      <div id="sidebar">
              <section>
              <header>Features</header>
            <div class="sidebar-section-content prettify">
        <p style="text-align: center;">
	&nbsp;</p>
<p>
	<a href="https://github.com/cplusplus/draft"><img alt="" src="../../images/uploads/github.png" style="width: 90px; height: 48px; margin-right: 5px; margin-left: 5px; float: right;" /></a><a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2015/n4527.pdf"><strong>Working Draft</strong> of the next&nbsp;standard</a></p>
<p>
	&nbsp;</p>
<p>
	<a href="../../std/status.html">Current ISO C++ status</a></p>
<p>
	&nbsp;</p>
<p>
	<a href="../../std/meetings-and-participation/upcoming-meetings.html">Upcoming ISO C++ meetings</a></p>
<p>
	&nbsp;</p>
<p>
	<a href="http://en.cppreference.com/w/cpp/compiler_support">Compiler conformance status</a></p>
      </div>
    </section>
  
  
  
        <nav>
          <section>
            <header>
              Navigation
            </header>
            <ul>
              <li><a href="../faq.html">FAQ Home</a></li>
              <li><a href="../../themes/wiki_themes/isocpp/rss/faq-revisions-rss.php" class="icon rss">FAQ RSS Feed</a></li>
              <li><a href="editinfo.html">FAQ Help</a></li>
                          </ul>
          </section>
        
        
          <section>
            <header>
              Search this Wiki
            </header>
            <form method="post" action="https://isocpp.org/wiki/faq/Special:Search_results">
              <input type="hidden" name="XID" value="1d746478b619aa5492eaae6aab6710aa6df6bc62" />
              <input type="text" class="input" name="keywords" size="20" value="" maxlength="80" /><input type="submit" class="submit" value="Go" />
            </form>
          </section>
          
          <section>
            <header>
              Go to Page
            </header>
            <form method="post" action="https://isocpp.org/wiki/faq/Special:Find_page">
              <input type="hidden" name="XID" value="4eb008b95228e297927662bdbe6f656629beb4aa" />
              <input type="text" class="input" name="title" size="20" value="" maxlength="80" /><input type="submit" class="submit" value="Go" />
            </form>
          </section>
        </nav>
          
      <section>
              <header>Upcoming Events</header>
            <div class="sidebar-section-content prettify">
        <p>
	<a href="http://cppcon.org/" style="line-height: 1;"><strong>CppCon 2015</strong></a></p>
<p>
	<span style="line-height: 1;">Sep 19-20 (boot camp)</span></p>
<p>
	<span style="line-height: 1;">Sep 20-25 (conference)</span></p>
<p>
	<span style="line-height: 1;">Bellevue, WA, USA</span></p>
<p>
	&nbsp;</p>
<p>
	<span style="line-height: 1;"><a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2015/n4544.htm"><strong>ISO C++ Fall Meeting</strong></a> <a href="../../files/papers/n4545.html">(agenda)</a></span></p>
<p>
	Oct 19-24,&nbsp;<span style="line-height: 1;">Kona, HI, USA</span></p>
<p>
	&nbsp;</p>
<p>
	<a href="http://meetingcpp.com/index.php/meetingcpp-2015.html"><strong>Meeting C++ 2015</strong></a></p>
<p>
	Dec 4-5, Berlin, Germany</p>
<p>
	&nbsp;</p>
      </div>
    </section>
  
      <section>
            <div class="sidebar-section-content prettify">
        <div class="twitter-container">
	<a class="twitter-timeline" data-dnt="true" data-widget-id="344512921423998976" href="https://twitter.com/isocpp">Tweets by @isocpp</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></div>
      </div>
    </section>
  
      </div>

      <div id="mainbar">
        <header>
          <div class="breadcrumbs">

            <a href="../faq.html">Wiki Home</a>
            <span class="breadcrumbspacer">&nbsp;&nbsp;&gt;&nbsp;&nbsp;</span>

                        misc technical issues
            
          </div>
          
          <div class="wiki-page-actions">
                    <a href="misc-technical-issues.html">View</a>
                              </div>
          
          <h2>
                    
          
                    
                    misc technical issues
                    </h2>

          <div class="save-to-reader wiki">
            <div class="title">Save to:</div>
            <a href="http://www.instapaper.com/hello2?url={url}&amp;title=misc%20technical%20issues" class="icon instapaper">Instapaper</a>
            <a href="http://getpocket.com/create?url={url}&amp;action=save&amp;k=3aNp2F20Aao4bvW884g224eUfud1nfI0" class="icon pocket">Pocket</a>
            <a href="#" class="icon readability">Readability</a>
            <div class="rdbWrapper" data-show-read="1" data-show-send-to-kindle="1" data-show-print="1" data-show-email="1" data-orientation="0" data-version="1" data-bg-color="#ffffff"></div><script type="text/javascript">(function() {var s = document.getElementsByTagName("script")[0],rdb = document.createElement("script"); rdb.type = "text/javascript"; rdb.async = true; rdb.src = document.location.protocol + "//www.readability.com/embed.js"; s.parentNode.insertBefore(rdb, s); })();</script>
          </div>
          
        </header>

        <article>

          <!-- Begin Main Content of Page -->

          
          

          <div id="wiki-content">

          

          <div class="prettify">


<h2 id="misc-technical-issues">Miscellaneous Technical Issues</h2>

<h3 id="function-object">What is a function object?</h3>

<p>An object that in some way behaves like a function, of course. Typically, that would mean an object of a class that defines the application operator &#8211; <code>operator()</code>.</p>

<p>A function object is a more general concept than a function because a function object can have state that persist across several calls (like a static local variable) and can be initialized and examined from outside the object (unlike a static local variable). For example:</p>

<pre><code>    class Sum {
        int val;
    public:
        Sum(int i) :val(i) { }
        operator int() const { return val; }        // extract value

        int operator()(int i) { return val+=i; }    // application
    };

    void f(vector&lt;int&gt; v)
    {
        Sum s = 0;  // initial value 0
        s = for_each(v.begin(), v.end(), s);    // gather the sum of all elements
        cout &lt;&lt; "the sum is " &lt;&lt; s &lt;&lt; "\n";

        // or even:
        cout &lt;&lt; "the sum is " &lt;&lt; for_each(v.begin(), v.end(), Sum(0)) &lt;&lt; "\n";
    }
</code></pre>

<p>Note that a function object with an inline application operator inlines beautifully because there are no pointers involved that might confuse optimizers. To contrast: current optimizers are rarely (never?) able to inline a call through a pointer to function.</p>

<p>Function objects are extensively used to provide flexibility in the standard library.</p>

<h3 id="convert-num-to-string">How do I convert a value (a number, for example) to a <code>std::string</code>?</h3>

<p>Call <a href="newbie.html#int-to-string" title="FAQ: How do I convert an integer to a string?"><code>to_string</code></a>.</p>

<p>For advanced and corner-case uses that aren&#8217;t covered by that answer, read on&#8230;</p>

<p>There are two easy ways to do this: you can use the <code>&lt;cstdio&gt;</code> facilities or the <code>&lt;iostream&gt;</code> library. In general, <a href="input-output.html#iostream-vs-stdio" title="FAQ: Why should I use &lt;iostream> instead of the traditional &lt;cstdio>?">you
should prefer the <code>&lt;iostream&gt;</code> library</a>.</p>

<p>The <code>&lt;iostream&gt;</code> library allows you to convert pretty much anything to a <code>std::string</code> using the following syntax (the
example converts a <code>double</code>, but you could substitute pretty much anything that prints using the <code>&lt;&lt;</code> operator):</p>

<pre><code>// File: convert.h
#include &lt;iostream&gt;
#include &lt;sstream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

class BadConversion : public std::runtime_error {
public:
  BadConversion(const std::string&amp; s)
    : std::runtime_error(s)
    { }
};

inline std::string stringify(double x)
{
  std::ostringstream o;
  if (!(o &lt;&lt; x))
    throw BadConversion("stringify(double)");
  return o.str();
}
</code></pre>

<p>The <code>std::ostringstream</code> object <code>o</code> offers formatting facilities just like those for <code>std::cout</code>. You can use
manipulators and format flags to control the formatting of the result, just as you can for other <code>std::cout</code>.</p>

<p>In this example, we <em>insert</em> <code>x</code> into <code>o</code> via the overloaded insertion operator, <code>&lt;&lt;</code>. This invokes the iostream
formatting facilities to convert <code>x</code> into a <code>std::string</code>. <a href="input-output.html#istream-and-while" title="FAQ: How does that funky while (std::cin >> foo) syntax work?">The <code>if</code> test</a> makes sure the conversion
works correctly &#8212; it should always succeed for built-in/intrinsic types, but the <code>if</code> test is good style.</p>

<p>The expression <code>o.str()</code> returns the <code>std::string</code> that contains whatever has been inserted into stream <code>o</code>, in this
case the string value of <code>x</code>.</p>

<p>Here&#8217;s how to use the <code>stringify()</code> function:</p>

<pre><code>#include "convert.h"

void myCode()
{
  double x = /*...*/ ;
  // ...
  std::string s = "the value is " + stringify(x);
  // ...
}
</code></pre>

<h3 id="convert-string-to-num">How do I convert a <code>std::string</code> to a number?</h3>

<p>Call <a href="newbie.html#string-to-int" title="FAQ: How do I convert a string to an integer?"><code>stoi</code></a>.</p>

<p>For advanced and corner-case uses that aren&#8217;t covered by that answer, read on&#8230;</p>

<p>There are two easy ways to do this: you can use the <code>&lt;cstdio&gt;</code> facilities or the <code>&lt;iostream&gt;</code> library. In general, <a href="input-output.html#iostream-vs-stdio" title="FAQ: Why should I use &lt;iostream> instead of the traditional &lt;cstdio>?">you
should prefer the <code>&lt;iostream&gt;</code> library</a>.</p>

<p>The <code>&lt;iostream&gt;</code> library allows you to convert a <code>std::string</code> to pretty much anything using the following syntax (the
example converts a <code>double</code>, but you could substitute pretty much anything that can be read using the <code>&gt;&gt;</code> operator):</p>

<pre><code>// File: convert.h
#include &lt;iostream&gt;
#include &lt;sstream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

class BadConversion : public std::runtime_error {
public:
  BadConversion(const std::string&amp; s)
    : std::runtime_error(s)
    { }
};

inline double convertToDouble(const std::string&amp; s)
{
  std::istringstream i(s);
  double x;
  if (!(i &gt;&gt; x))
    throw BadConversion("convertToDouble(\"" + s + "\")");
  return x;
}
</code></pre>

<p>The <code>std::istringstream</code> object <code>i</code> offers formatting facilities just like those for <code>std::cin</code>. You can use
manipulators and format flags to control the formatting of the result, just as you can for other <code>std::cin</code>.</p>

<p>In this example, we initialize the <code>std::istringstream</code> <code>i</code> passing the <code>std::string</code> <code>s</code> (for example, <code>s</code> might be the
string <code>"123.456"</code>), then we <em>extract</em> <code>i</code> into <code>x</code> via the overloaded extraction operator, <code>&gt;&gt;</code>. This invokes the
iostream formatting facilities to convert as much of the string as possible/appropriate based on the type of <code>x</code>.</p>

<p><a href="input-output.html#istream-and-while" title="FAQ: How does that funky while (std::cin >> foo) syntax work?">The <code>if</code> test</a> makes sure the conversion works correctly. For example, if the string contains
characters that are inappropriate for the type of <code>x</code>, the <code>if</code> test will fail.</p>

<p>Here&#8217;s how to use the <code>convertToDouble()</code> function:</p>

<pre><code>#include "convert.h"

void myCode()
{
  std::string s = /*...a string representation of a number...*/ ;
  // ...
  double x = convertToDouble(s);
  // ...
}
</code></pre>

<p>You probably want to enhance <code>convertToDouble()</code> so it optionally checks that there aren&#8217;t any left-over characters:</p>

<pre><code>inline double convertToDouble(const std::string&amp; s,
                              bool failIfLeftoverChars = true)
{
  std::istringstream i(s);
  double x;
  char c;
  if (!(i &gt;&gt; x) || (failIfLeftoverChars &amp;&amp; i.get(c)))
    throw BadConversion("convertToDouble(\"" + s + "\")");
  return x;
}
</code></pre>

<h3 id="convert-string-to-any">Can I templatize the above functions so they work with other types?</h3>

<p>Yes &#8212; for any types that support <code>iostream</code>-style input/output.</p>

<p>For example, suppose you want to convert an object of class <code>Foo</code> to a <code>std::string</code>, or perhaps the reverse: from a
<code>std::string</code> to a <code>Foo</code>. You could write a whole family of conversion functions based on the ones shown in the previous
FAQs, or you could write a template function so the compiler does the grunt work.</p>

<p>For example, to convert an arbitrary type <code>T</code> to a <code>std::string</code>, provided <code>T</code> supports syntax like <code>std::cout &lt;&lt; x</code>,
you can use this:</p>

<pre><code>// File: convert.h
#include &lt;iostream&gt;
#include &lt;sstream&gt;
#include &lt;string&gt;
#include &lt;typeinfo&gt;
#include &lt;stdexcept&gt;

class BadConversion : public std::runtime_error {
public:
  BadConversion(const std::string&amp; s)
    : std::runtime_error(s)
    { }
};

template&lt;typename T&gt;
inline std::string stringify(const T&amp; x)
{
  std::ostringstream o;
  if (!(o &lt;&lt; x))
    throw BadConversion(std::string("stringify(")
                        + typeid(x).name() + ")");
  return o.str();
}
</code></pre>

<p>Here&#8217;s how to use the <code>stringify()</code> function:</p>

<pre><code>#include "convert.h"

void myCode()
{
  Foo x;
  // ...
  std::string s = "this is a Foo: " + stringify(x);
  // ...
}
</code></pre>

<p>You can also convert <em>from</em> any type that supports <code>iostream</code> input by adding this to file <code>convert.h</code>:</p>

<pre><code>template&lt;typename T&gt;
inline void convert(const std::string&amp; s, T&amp; x,
                    bool failIfLeftoverChars = true)
{
  std::istringstream i(s);
  char c;
  if (!(i &gt;&gt; x) || (failIfLeftoverChars &amp;&amp; i.get(c)))
    throw BadConversion(s);
}
</code></pre>

<p>Here&#8217;s how to use the <code>convert()</code> function:</p>

<pre><code>#include "convert.h"

void myCode()
{
  std::string s = /*...a string representation of a Foo...*/ ;
  // ...
  Foo x;
  convert(s, x);
  // ...
  // ...code that uses x...
}
</code></pre>

<p>To simplify your code, particularly for light-weight easy-to-copy types, you probably want to add a return-by-value
conversion function to file <code>convert.h</code>:</p>

<pre><code>template&lt;typename T&gt;
inline T convertTo(const std::string&amp; s,
                   bool failIfLeftoverChars = true)
{
  T x;
  convert(s, x, failIfLeftoverChars);
  return x;
}
</code></pre>

<p>This simplifies your &#8220;usage&#8221; code some. You call it by explicitly specifying the template parameter <code>T</code>:</p>

<pre><code>#include "convert.h"

void myCode()
{
  std::string a = /*...string representation of an int...*/ ;
  std::string b = /*...string representation of an int...*/ ;
  // ...
  if (convertTo&lt;int&gt;(a) &lt; convertTo&lt;int&gt;(b))
    /*...*/ ;
}
</code></pre>

<h3 id="abstract-class">Why do my compiles take so long?</h3>

<p>You may have a problem with your compiler. It may be old, you may have it installed wrongly, or your computer might be an antique. I can&#8217;t help you with such problems.</p>

<p>However, it is more likely that the program that you are trying to compile is poorly designed, so that compiling it involves the compiler examining hundreds of header files and tens of thousands of lines of code. In principle, this can be avoided. If this problem is in your library vendor&#8217;s design, there isn&#8217;t much you can do (except changing to a better library/vendor), but you can structure your own code to minimize re-compilation after changes. Designs that do that are typically better, more maintainable, designs because they exhibit better separation of concerns.</p>

<p>Consider a classical example of an object-oriented program:</p>

<pre><code>    class Shape {
    public:     // interface to users of Shapes
        virtual void draw() const;
        virtual void rotate(int degrees);
        // ...
    protected:  // common data (for implementers of Shapes)
        Point center;
        Color col;
        // ...
    };

    class Circle : public Shape {
    public: 
        void draw() const;
        void rotate(int) { }
        // ...
    protected:
        int radius;
        // ...
    };

    class Triangle : public Shape {
    public: 
        void draw() const;
        void rotate(int);
        // ...
    protected:
        Point a, b, c;
        // ...
    };  
</code></pre>

<p>The idea is that users manipulate shapes through <code>Shape</code>&#8217;s public interface, and that implementers of derived classes (such as <code>Circle</code> and <code>Triangle</code>) share aspects of the implementation represented by the protected members.</p>

<p>There are three serious problems with this apparently simple idea:</p>

<ul>
<li>It is not easy to define shared aspects of the implementation that are helpful to all derived classes. For that reason, the set of protected members is likely to need changes far more often than the public interface. For example, even though &#8220;center&#8221; is arguably a valid concept for all <code>Shape</code>s, it is a nuisance to have to maintain a point &#8220;center&#8221; for a <code>Triangle</code> &#8211; for triangles, it makes more sense to calculate the center if and only if someone expresses interest in it.</li>
<li>The protected members are likely to depend on &#8220;implementation&#8221; details that the users of <code>Shape</code>s would rather not have to depend on. For example, much (most?) code using a <code>Shape</code> will be logically independent of the definition of a &#8220;color&#8221;, yet the presence of <code>Color</code> in the definition of <code>Shape</code> will probably require compilation of header files defining the operating system&#8217;s notion of color.</li>
<li>When something in the protected part changes, users of <code>Shape</code> have to recompile &#8211; even though only implementers of derived classes have access to the protected members.</li>
</ul>

<p>Thus, the presence of &#8220;information helpful to implementers&#8221; in the base class that also acts as the interface to users is the source of instability in the implementation, spurious recompilation of user code (when implementation information changes), and excess inclusion of header files into user code (because the &#8220;information helpful to implementers&#8221; needs those headers). This is sometimes known as the &#8220;brittle base class problem.&#8221;</p>

<p>The obvious solution is to omit the &#8220;information helpful to implemeters&#8221; for classes that are used as interfaces to users. That is, to make interfaces, pure interfaces. That is, to represent interfaces as abstract classes:</p>

<pre><code>    class Shape {
    public:     // interface to users of Shapes
        virtual void draw() const = 0;
        virtual void rotate(int degrees) = 0;
        virtual Point center() const = 0;
        // ...

        // no data
    };

    class Circle : public Shape {
    public: 
        void draw() const;
        void rotate(int) { }
        Point center() const { return cent; }
        // ...
    protected:
        Point cent;
        Color col;
        int radius;
        // ...
    };

    class Triangle : public Shape {
    public: 
        void draw() const;
        void rotate(int);
        Point center() const;
        // ...
    protected:
        Color col;
        Point a, b, c;
        // ...
    };  
</code></pre>

<p>The users are now insulated from changes to implementations of derived classes. I have seen this technique decrease build times by orders of magnitudes.</p>

<p>But what if there really is some information that is common to all derived classes (or simply to several derived classes)? Simply make that information a class and derive the implementation classes from that also:</p>

<pre><code>    class Shape {
    public:     // interface to users of Shapes
        virtual void draw() const = 0;
        virtual void rotate(int degrees) = 0;
        virtual Point center() const = 0;
        // ...

        // no data
    };

    struct Common {
        Color col;
        // ...
    };

    class Circle : public Shape, protected Common {
    public: 
        void draw() const;
        void rotate(int) { }
        Point center() const { return cent; }
        // ...
    protected:
        Point cent;
        int radius;
    };

    class Triangle : public Shape, protected Common {
    public: 
        void draw() const;
        void rotate(int);
        Point center() const;
        // ...
    protected:
        Point a, b, c;
    };  
</code></pre>

<h3 id="macros-with-if">What should be done with macros that contain <code>if</code>?</h3>

<p><a href="big-picture.html#use-evil-things-sometimes" title="FAQ: Will I sometimes use any so-called 'evil' constructs?">Ideally</a> you&#8217;ll get rid of the macro. Macros are <a href="big-picture.html#defn-evil" title="FAQ: What does the FAQ mean by 'such and such is evil'?">evil</a> in 4 different ways:
<a href="inline-functions.html#inline-vs-macros" title="FAQ: Why should I use inline functions instead of plain old #define macros?">evil#1</a>, <a href="misc-technical-issues.html#macros-with-if" title="FAQ: What should be done with macros that contain if?">evil#2</a>, <a href="misc-technical-issues.html#macros-with-multi-stmts" title="FAQ: What should be done with macros that have multiple lines?">evil#3</a>, and
<a href="misc-technical-issues.html#macros-with-token-pasting" title="FAQ: What should be done with macros that need to paste two tokens together?">evil#4</a>, regardless of whether they contain an <code>if</code> (but they&#8217;re especially evil if they
contain an <code>if</code>).</p>

<p>Nonetheless, even though macros are evil, <a href="big-picture.html#use-evil-things-sometimes" title="FAQ: Will I sometimes use any so-called 'evil' constructs?">sometimes they are the lesser of the other evils</a>.
When that happens, read this FAQ so you know how to make them &#8220;less bad,&#8221; then hold your nose and do what&#8217;s practical.</p>

<p>Here&#8217;s a naive solution:</p>

<pre><code>#define MYMACRO(a,b) \                (Bad)
    if (xyzzy) asdf()
</code></pre>

<p>This will cause big problems if someone uses that macro in an <code>if</code> statement:</p>

<pre><code>if (whatever)
    MYMACRO(foo,bar);
else
    baz;
</code></pre>

<p>The problem is that the <code>else baz</code> nests with the wrong <code>if</code>: the compiler sees this:</p>

<pre><code>if (whatever)
    if (xyzzy) asdf();
    else baz;
</code></pre>

<p>Obviously that&#8217;s a bug.</p>

<p>The easy solution is to require <code>{...}</code> everywhere, but there&#8217;s another solution that I prefer even if there&#8217;s a coding
standard that requires <code>{...}</code> everywhere (just in case someone somewhere forgets): add a balancing <code>else</code> to the macro
definition:</p>

<pre><code>#define MYMACRO(a,b) \                (Good)
    if (xyzzy) asdf(); \
    else (void)0
</code></pre>

<p>(The <code>(void)0</code> causes the compiler to <a href="misc-technical-issues.html#macros-with-multi-stmts" title="FAQ: What should be done with macros that have multiple lines?">generate an error message</a> if you forget to put the <code>;</code>
after the &#8216;call&#8217;.)</p>

<p>Your usage of that macro might look like this:</p>

<pre><code>if (whatever)
    MYMACRO(foo,bar);
                    ↑ // This ; closes off the else (void)0 part
else
    baz;
</code></pre>

<p>which will get expanded into a balanced set of <code>if</code>s and <code>else</code>s:</p>

<pre><code>if (whatever)
    if (xyzzy)
        asdf();
    else
        (void)0;
        ↑↑↑↑↑↑↑↑ // A do-nothing statement
else
    baz;
</code></pre>

<p>Like I said, I personally do the above even when the coding standard calls for <code>{...}</code> in all the <code>if</code>s. Call me
paranoid, but I sleep better at night and my code has fewer bugs.</p>

<p>There is another approach that old-line C programmers will remember:</p>

<pre><code>#define MYMACRO(a,b) \                (Okay)
    do { \
      if (xyzzy) asdf(); \
    } while (false)
</code></pre>

<p>Some people prefer the <code>do {...} while (false)</code> approach, though if you choose to use that, be aware that it might cause
your compiler to generate <a href="misc-technical-issues.html#macros-with-multi-stmts" title="FAQ: What should be done with macros that have multiple lines?">less efficient code</a>. Both approaches cause the compiler to give you
an error message if you forget the <code>;</code> after <code>MYMACRO(foo,bar)</code>.</p>

<h3 id="macros-with-multi-stmts">What should be done with macros that have multiple lines?</h3>

<p>Answer: Choke, gag, cough. Macros are <a href="big-picture.html#defn-evil" title="FAQ: What does the FAQ mean by 'such and such is evil'?">evil</a> in 4 different ways: <a href="inline-functions.html#inline-vs-macros" title="FAQ: Why should I use inline functions instead of plain old #define macros?">evil#1</a>,
<a href="misc-technical-issues.html#macros-with-if" title="FAQ: What should be done with macros that contain if?">evil#2</a>, <a href="misc-technical-issues.html#macros-with-multi-stmts" title="FAQ: What should be done with macros that have multiple lines?">evil#3</a>, and <a href="misc-technical-issues.html#macros-with-token-pasting" title="FAQ: What should be done with macros that need to paste two tokens together?">evil#4</a>. Kill them <em>all!!</em>
(Just <a href="big-picture.html#defn-evil" title="FAQ: What does the FAQ mean by 'such and such is evil'?">kidding</a>.)</p>

<p>Seriously, sometimes you need to use them <a href="big-picture.html#use-evil-things-sometimes" title="FAQ: Will I sometimes use any so-called 'evil' constructs?">anyway</a>, and when you do, read this to learn some
safe ways to write a macro that has multiple statements.</p>

<p>Here&#8217;s a naive solution:</p>

<pre><code>#define MYMACRO(a,b) \                (Bad)
    statement1; \
    statement2; \
    /*...*/ \
    statementN;
</code></pre>

<p>This can cause problems if someone uses the macro in a context that demands a single statement. E.g.,</p>

<pre><code>while (whatever)
    MYMACRO(foo, bar);
</code></pre>

<p>The naive solution is to wrap the statements inside <code>{...}</code>, such as this:</p>

<pre><code>#define MYMACRO(a,b) \                (Bad)
    { \
        statement1; \
        statement2; \
        /*...*/ \
        statementN; \
    }
</code></pre>

<p>But this will cause compile-time errors with things like the following:</p>

<pre><code>if (whatever)
    MYMACRO(foo, bar);
else
    baz;
</code></pre>

<p>&#8230;since the compiler will see:</p>

<pre><code>if (whatever)
{
    statement1;
    statement2;
    // ...
    statementN;
} ; else
↑↑↑↑↑↑↑↑ // Compile-time error!
    baz;
</code></pre>

<p>One solution is to use a <code>do {</code> <em>&lt;statements go here&gt;</em> <code>} while (false)</code> pseudo-loop. This executes the body of
the &#8220;loop&#8221; exactly once. The macro might look like this:</p>

<pre><code>#define MYMACRO(a, b) \                (Okay)
    do { \
        statement1; \
        statement2; \
        /*...*/ \
        statementN; \
    } while (false)
                  ↑ // Intentionally not adding a ; here!
</code></pre>

<p>The <code>;</code> gets added by the macro&#8217;s user, such as:</p>

<pre><code>if (whatever)
    MYMACRO(foo, bar);
                     ↑ // The user of MYMACRO() adds the ; here
else
    baz;
</code></pre>

<p>After expansion, the compiler will see this:</p>

<pre><code>if (whatever)
    do {
        statement1;
        statement2;
        // ...
        statementN;
    } while (false);
                   ↑ // From user's code, not from MYMACRO() itself
else
    baz;
</code></pre>

<p>There is an unlikely but possible downside to the above approach: historically some C++ compilers have refused to
inline-expand any function containing a loop. If your C++ compiler has that limitation, it will not inline-expand
any function that uses <code>MYMACRO()</code>. Chances are this won&#8217;t be a problem, either because you don&#8217;t use <code>MYMACRO()</code> in any
inline functions, or because your compiler (subject to all its other constraints) is willing to inline-expand functions
containing loops (provided the inline function meets all your compiler&#8217;s other requirements). However, if you are
concerned, do some tests with your compiler: examine the resulting assembly code and/or perform a few simple timing
tests.</p>

<p>If you have any problems with your compiler&#8217;s willingness to inline-expand functions containing loops, you can change
<code>MYMACRO()</code>&#8217;s definition to <code>if (true) {</code>&#8230;<code>} else (void)0</code></p>

<pre><code>#define MYMACRO(a, b) \
    if (true) { \
        statement1; \
        statement2; \
        /*...*/ \
        statementN; \
    } else
        (void)0
               ↑ // Intentionally not adding a ; here!
</code></pre>

<p>After expansion, the compiler will see a balanced set of <code>if</code>s and <code>else</code>s):</p>

<pre><code>if (whatever)
    if (true) {
        statement1;
        statement2;
        // ...
        statementN;
    } else
        (void)0;
        ↑↑↑↑↑↑↑ // A do-nothing statement
else
    baz;
</code></pre>

<p>The <code>(void)0</code> in the macro definition forces users to remember the <code>;</code> after any usage of the macro. If you forgot the
<code>;</code> like this&#8230;</p>

<pre><code>foo();
MYMACRO(a, b)
             ↑ // Whoops, forgot the ; here
bar();
baz();
</code></pre>

<p>&#8230;then after expansion the compiler would see this:</p>

<pre><code>foo();
if (true) {
    statement1; \
    statement2; \
    /*...*/ \
    statementN; \
} else
    (void)0 bar();
            ↑↑↑↑↑ // Fortunately(!) this will produce a compile-time error-message
baz();
</code></pre>

<p>Even though the specific error message is likely to be confusing, it will at least cause the programmer to notice that
something is wrong. That&#8217;s a <em>lot</em> better than the alternative: without the <code>(void)0</code> in the <code>MYMACRO()</code> definition,
the compiler would silently generate the wrong code: the <code>bar()</code> call would never be called, since it would erroneously
be on the unreachable <code>else</code> branch of the <code>if</code>.</p>

<h3 id="macros-with-token-pasting">What should be done with macros that need to paste two tokens together?</h3>

<p>Groan. I really <em>hate</em> macros. Yes <a href="big-picture.html#use-evil-things-sometimes" title="FAQ: Will I sometimes use any so-called 'evil' constructs?">they&#8217;re useful sometimes</a>, and yes I use them. But I
always wash my hands afterwards. Twice. Macros are <a href="big-picture.html#defn-evil" title="FAQ: What does the FAQ mean by 'such and such is evil'?">evil</a> in 4 different ways: <a href="inline-functions.html#inline-vs-macros" title="FAQ: Why should I use inline functions instead of plain old #define macros?">evil#1</a>,
<a href="misc-technical-issues.html#macros-with-if" title="FAQ: What should be done with macros that contain if?">evil#2</a>, <a href="misc-technical-issues.html#macros-with-multi-stmts" title="FAQ: What should be done with macros that have multiple lines?">evil#3</a>, and <a href="misc-technical-issues.html#macros-with-token-pasting" title="FAQ: What should be done with macros that need to paste two tokens together?">evil#4</a>.</p>

<p>Here we go again, desperately trying to make an inherently evil thing a little <a href="big-picture.html#use-evil-things-sometimes" title="FAQ: Will I sometimes use any so-called 'evil' constructs?">less evil</a>.</p>

<p>First, the basic approach is use the ISO/ANSI C and ISO/ANSI C++ &#8220;token pasting&#8221; feature: <code>##</code>. On the surface this
would look like the following:</p>

<p>Suppose you have a macro called &#8220;MYMACRO&#8221;, and suppose you&#8217;re passing a token as the parameter of that macro, and
suppose you want to concatenate that token with the token &#8220;Tmp&#8221; to create a variable name. For example, the use of
<code>MYMACRO(Foo)</code> would create a variable named <code>FooTmp</code> and the use of <code>MYMACRO(Bar)</code> would create a variable named
<code>BarTmp</code>. In this case the naive approach would be to say this:</p>

<pre><code>#define MYMACRO(a) \
    /*...*/ a ## Tmp /*...*/
</code></pre>

<p>However you need a double layer of indirection when you use <code>##</code>. Basically you need to create a special macro for
&#8220;token pasting&#8221; such as:</p>

<pre><code>#define NAME2(a,b)         NAME2_HIDDEN(a,b)
#define NAME2_HIDDEN(a,b)  a ## b
</code></pre>

<p>Trust me on this &#8212; you really need to do this! (And <em>please</em> nobody write me saying it sometimes works without the
second layer of indirection. Try concatenating a symbol with <code>__LINE__</code> and see what happens then.)</p>

<p>Then replace your use of <code>a ## Tmp</code> with <code>NAME2(a,Tmp)</code>:</p>

<pre><code>#define MYMACRO(a) \
    /*...*/ NAME2(a,Tmp) /*...*/
</code></pre>

<p>And if you have a three-way concatenation to do (e.g., to paste three tokens together), you&#8217;d create a <code>NAME3()</code> macro
like this:</p>

<pre><code>#define NAME3(a,b,c)         NAME3_HIDDEN(a,b,c)
#define NAME3_HIDDEN(a,b,c)  a ## b ## c
</code></pre>

<h3 id="backslashes-in-include-files">Why can&#8217;t the compiler find my header file in <code>#include "c:\test.h"</code> ?</h3>

<p>Because <code>"\t"</code> is a tab character.</p>

<p>You should use forward slashes (<code>"/"</code>) rather than backslashes (<code>"\"</code>) in your <code>#include</code> filenames, even on operating
systems that use backslashes such as DOS, Windows, OS/2, etc. For example:</p>

<pre><code>#if 1
  #include "/version/next/alpha/beta/test.h"    // RIGHT!
#else
  #include "\version\next\alpha\beta\test.h"    // WRONG!
#endif
</code></pre>

<p>Note that <a href="input-output.html#backslashes-in-filenames" title="FAQ: Why can't I open a file in a different directory such as '..\test.dat'?">you should use forward slashes (<code>"/"</code>) on all your filenames</a>, not just on your
<code>#include</code> files.</p>

<p>Note that your particular compiler might not treat a backslash within a header-name the same as it treats a backslash
within a string literal. For instance, your particular compiler might treat <code>#include "foo\bar\baz"</code> as if the <code>'\'</code>
chars were quoted. This is because header names and string literals are different: your compiler will always parse
backslashes in string literals in the usual way, with <code>'\t'</code> becoming a tab character, etc., but it might not parse
header names using those same rules. In any case, you still shouldn&#8217;t use backslashes in your header names since there&#8217;s
something to lose but nothing to gain.</p>

<h3 id="scope-of-for-loop-var">What are the C++ scoping rules for <code>for</code> loops?</h3>

<p>Loop variables declared in the <code>for</code> statement proper are local to the loop body.</p>

<p>The following code used to be legal, but not any more, since <code>i</code>&#8217;s scope is now inside the <code>for</code> loop only:</p>

<pre><code>for (int i = 0; i &lt; 10; ++i) {
  // ...
  if ( /* something weird */ )
    break;
  // ...
}

if (i != 10) {
  // We exited the loop early; handle this situation separately
  // ...
}
</code></pre>

<p>If you&#8217;re working with some old code that uses a <code>for</code> loop variable after the <code>for</code> loop, the compiler will
(hopefully!) give you a warning or an error message such as &#8220;Variable <code>i</code> is not in scope&#8221;.</p>

<p>Unfortunately there are cases when old code will compile cleanly, but will do something different &#8212; the wrong thing.
For example, if the old code has a global variable <code>i</code>, the above code <code>if (i != 10)</code> silently change in meaning from
the <code>for</code> loop variable <code>i</code> under the old rule to the global variable <code>i</code> under the current rule. This is not good. If
you&#8217;re concerned, you should check with your compiler to see if it has some option that forces it to use the old rules
with your old code.</p>

<p>Note: You should avoid having the same variable name in nested scopes, such as a global <code>i</code> and a local <code>i</code>. In fact,
you should avoid globals altogether whenever you can. If you abided by these coding standards in your old code, you
won&#8217;t be hurt by a lot of things, including the scoping rules for <code>for</code> loop variables.</p>

<p>Note: If your new code might get compiled with an old compiler, you might want to put <code>{...}</code> around the <code>for</code> loop to
force even old compilers to scope the loop variable to the loop. And <em>please</em> <a href="big-picture.html#use-evil-things-sometimes" title="FAQ: Will I sometimes use any so-called 'evil' constructs?">try to</a> avoid
the temptation to use macros for this. Remember: macros are <a href="big-picture.html#defn-evil" title="FAQ: What does the FAQ mean by 'such and such is evil'?">evil</a> in 4 different ways:
<a href="inline-functions.html#inline-vs-macros" title="FAQ: Why should I use inline functions instead of plain old #define macros?">evil#1</a>, <a href="misc-technical-issues.html#macros-with-if" title="FAQ: What should be done with macros that contain if?">evil#2</a>, <a href="misc-technical-issues.html#macros-with-multi-stmts" title="FAQ: What should be done with macros that have multiple lines?">evil#3</a>, and
<a href="misc-technical-issues.html#macros-with-token-pasting" title="FAQ: What should be done with macros that need to paste two tokens together?">evil#4</a>.</p>

<h3 id="overload-by-return-type">Why can&#8217;t I overload a function by its return type?</h3>

<p>If you declare both <code>char f()</code> and <code>float f()</code>, the compiler gives you an error message, since calling simply <code>f()</code>
would be ambiguous.</p>

<h3 id="persistence">What is &#8220;persistence&#8221;? What is a &#8220;persistent object&#8221;?</h3>

<p>A persistent object can live after the program which created it has stopped. Persistent objects can even outlive
different versions of the creating program, can outlive the disk system, the operating system, or even the hardware on
which the OS was running when they were created.</p>

<p>The challenge with persistent objects is to effectively store their member function code out on secondary storage along
with their data bits (and the data bits and member function code of all member objects, and of all their member objects
and base classes, etc). This is non-trivial when you have to do it yourself. In C++, you have to do it yourself.
C++/OO databases can help hide the mechanism for all this.</p>

<h3 id="forward-decl">How can I create two classes that both know about each other?</h3>

<p>Use a forward declaration.</p>

<p>Sometimes you must create two classes that use each other. This is called a circular dependency. For example:</p>

<pre><code>class Fred {
public:
  Barney* foo();  // Error: Unknown symbol 'Barney'
};

class Barney {
public:
  Fred* bar();
};
</code></pre>

<p>The <code>Fred</code> class has a member function that returns a <code>Barney*</code>, and the <code>Barney</code> class has a member function that
returns a <code>Fred*</code>. You may inform the compiler about the existence of a class or structure by using a &#8220;forward
declaration&#8221;:</p>

<pre><code>class Barney;
</code></pre>

<p>This line must appear <em>before</em> the declaration of class <code>Fred</code>. It simply informs the compiler that the name <code>Barney</code> is
a class, and further it is a promise to the compiler that you will eventually supply a complete definition of that
class.</p>

<h3 id="forward-decl-members">What special considerations are needed when forward declarations are used with member objects?</h3>

<p>The order of class declarations is critical.</p>

<p>The compiler will give you a compile-time error if the first class contains an object (as opposed to a pointer to an
object) of the second class. For example,</p>

<pre><code>class Fred;  // Okay: forward declaration

class Barney {
  Fred x;  // Error: The declaration of Fred is incomplete
};

class Fred {
  Barney* y;
};
</code></pre>

<p>One way to solve this problem is to reverse order of the classes so the &#8220;used&#8221; class is defined before the class that
uses it:</p>

<pre><code>class Barney;  // Okay: forward declaration

class Fred {
  Barney* y;  // Okay: the first can point to an object of the second
};

class Barney {
  Fred x;  // Okay: the second can have an object of the first
};
</code></pre>

<p>Note that it is never legal for each class to fully contain an object of the other class since that would imply
infinitely large objects. In other words, if an instance of <code>Fred</code> contains a <code>Barney</code> (as opposed to a <code>Barney*</code>), and
a <code>Barney</code> contains a <code>Fred</code> (as opposed to a <code>Fred*</code>), the compiler will give you an error.</p>

<h3 id="forward-decl-inline">What special considerations are needed when forward declarations are used with inline functions?</h3>

<p>The order of class declarations is critical.</p>

<p>The compiler will give you a compile-time error if the first class contains an inline function that invokes a member
function of the second class. For example,</p>

<pre><code>class Fred;  // Okay: forward declaration

class Barney {
public:
  void method()
  {
    x-&gt;yabbaDabbaDo();  // Error: Fred used before it was defined
  }
private:
  Fred* x;  // Okay: the first can point to an object of the second
};

class Fred {
public:
  void yabbaDabbaDo();
private:
  Barney* y;
};
</code></pre>

<p>There are a number of ways to work around this problem. One workaround would be to define <code>Barney::method()</code> with the
keyword <code>inline</code> below the definition of class <code>Fred</code> (though still within the header file). Another would be to define
<code>Barney::method()</code> without the keyword <code>inline</code> in file <code>Barney.cpp</code>. A third would be to use nested classes. A fourth
would be to reverse the order of the classes so the &#8220;used&#8221; class is defined before the class that uses it:</p>

<pre><code>class Barney;  // Okay: forward declaration

class Fred {
public:
  void yabbaDabbaDo();
private:
  Barney* y;  // Okay: the first can point to an object of the second
};

class Barney {
public:
  void method()
  {
    x-&gt;yabbaDabbaDo();  // Okay: Fred is fully defined at this point
  }
private:
  Fred* x;
};
</code></pre>

<p>Just remember this: Whenever you use <a href="misc-technical-issues.html#forward-decl" title="FAQ: How can I create two classes that both know about each other?">forward declaration</a>, you can use only that symbol; you may not do
anything that requires knowledge of the forward-declared class. Specifically you may not access any members of the
second class.</p>

<h3 id="forward-decl-templates">Why can&#8217;t I put a forward-declared class in a <code>std::vector&lt;&gt;</code>?</h3>

<p>Because the <code>std::vector&lt;&gt;</code> template needs to know the <code>sizeof()</code> its contained elements, plus the <code>std::vector&lt;&gt;</code>
probably accesses members of the contained elements (such as the copy constructor, the destructor, etc.). For example,</p>

<pre><code>class Fred;  // Okay: forward declaration

class Barney {
  std::vector&lt;Fred&gt; x;  // Error: the declaration of Fred is incomplete
};

class Fred {
  Barney* y;
};
</code></pre>

<p>One solution to this problem is to change <code>Barney</code> so it uses a <code>std::vector&lt;&gt;</code> of <code>Fred</code> <em>pointers</em> (raw pointers or smart pointers such as unique_ptr or shared_ptr) rather than a
<code>std::vector&lt;&gt;</code> of <code>Fred</code> <em>objects</em>:</p>

<pre><code>class Fred;  // Okay: forward declaration

class Barney {
  std::vector&lt;std::unique_ptr&lt;Fred&gt;&gt; x;  // Okay: Barney can use Fred pointers
};

class Fred {
  Barney* y;
};
</code></pre>

<p>Another solution to this problem is to reverse the order of the classes so <code>Fred</code> is defined before <code>Barney</code>:</p>

<pre><code>class Barney;  // Okay: forward declaration

class Fred {
  Barney* y;  // Okay: the first can point to an object of the second
};

class Barney {
  std::vector&lt;Fred&gt; x;  // Okay: Fred is fully defined at this point
};
</code></pre>

<p>Just remember this: Whenever you use a class as a template parameter, the declaration of that class must be complete
and not simply <a href="misc-technical-issues.html#forward-decl" title="FAQ: How can I create two classes that both know about each other?">forward declared</a>.</p>

<h3 id="double-mod-betw-seq-pt">Why do some people think <code>x = ++y + y++</code> is bad?</h3>

<p>Because it&#8217;s undefined behavior, which means the runtime system is allowed to do weird or even bizarre things.</p>

<p>The C++ language says you cannot modify a variable more than once between <a href="misc-technical-issues.html#sequence-points" title="FAQ: What's the deal with 'sequence points'?">sequence points</a>. Quoth
<a href="big-picture.html#copy-of-standard" title="FAQ: Where can I get a copy of the ANSI/ISO C++ standard?">the standard</a> (section 5, paragraph 4):</p>

<blockquote>
  <p>Between the previous and next sequence point a scalar object shall have its stored value modified at most once by the
  evaluation of an expression. Furthermore, the prior value shall be accessed only to determine the value to be stored.</p>
</blockquote>

<h3 id="evaluation-order">What&#8217;s the value of <code>i++ + i++</code>?</h3>

<p>It&#8217;s undefined. Basically, in C and C++, if you read a variable twice in an expression where you also write it, the result is undefined. Don&#8217;t do that. Another example is:</p>

<pre><code>    v[i] = i++;
</code></pre>

<p>Related example:</p>

<pre><code>    f(v[i],i++);
</code></pre>

<p>Here, the result is undefined because the order of evaluation of function arguments is undefined.</p>

<p>Having the order of evaluation undefined is claimed to yield better performing code. Compilers could warn about such examples, which are typically subtle bugs (or potential subtle bugs). It&#8217;s disappointing that after decades, most compilers still don&#8217;t warn, leaving that job to specialized, separate, and underused tools.</p>

<h3 id="sequence-points">What&#8217;s the deal with &#8220;sequence points&#8221;?</h3>

<p>Note: The C++11 standard has expressed the same rules as below in a different way. It no longer refers to &#8220;sequence points,&#8221; but the effects should be the same as described below.</p>

<p>The C++98 standard said (1.9p7):</p>

<blockquote>
  <p>At certain specified points in the execution sequence called <em>sequence points</em>, all side effects of previous
  evaluations shall be complete and no side effects of subsequent evaluations shall have taken place.</p>
</blockquote>

<p>For example, if an expression contains the subexpression <code>y++</code>, then the variable <code>y</code> will be incremented by the next
sequence point. Furthermore if the expression just after the sequence point contains the subexpression <code>++z</code>, then <code>z</code>
will not have yet been incremented at the moment the sequence point is reached.</p>

<p>The &#8220;certain specified points&#8221; that are called sequence points are (section and paragraph numbers are from <a href="big-picture.html#copy-of-standard" title="FAQ: Where can I get a copy of the ANSI/ISO C++ standard?">the
standard</a>):</p>

<ul>
<li>the semicolon (1.9p16)</li>
<li>the non-overloaded comma-operator (1.9p18)</li>
<li>the non-overloaded <code>||</code> operator (1.9p18)</li>
<li>the non-overloaded <code>&amp;&amp;</code> operator (1.9p18)</li>
<li>the ternary <code>?:</code> operator (1.9p18)</li>
<li>after evaluation of all a function&#8217;s parameters but before the first expression within the function is executed
(1.9p17)</li>
<li>after a function&#8217;s returned object has been copied back to the caller, but before the code just after the call has
yet been evaluated (1.9p17)</li>
<li>after the initialization of each base and member (12.6.2p3)</li>
</ul>

<!--
File: id-defns

Defines IDs for each FAQ and section.

Rule:
  FAQ editors should always use these IDs for every internal cross-reference within the FAQ.
  Always use indirect links ('[description][id-of-target]')  when linking to the FAQ from within the FAQ.
  Never  use  direct  links ('[description](url-of-target)') when linking to the FAQ from within the FAQ.

Reason:
  The FAQ is a living document -- we will split/join sections and move FAQs between sections.
  Those changes result in changes to the URL of the moved FAQs, which breaks all direct links -- many changes.
  However using indirect links means we need only change one thing in one place: this id-defns file.

Caveat:
  This rule applies only to internal cross-reference links, not to links to resources outside the FAQ.
  E.g., if you are making a link from FAQ 'x' to FAQ 'y', then you should always use FAQ 'y's link-ID.
  However if you are making a link from FAQ 'x' to some resource outside the FAQ, you have two choices:
  You can use a direct link to the external resource's URL ('[description](url-of-external-resource)'),
  or you can add the external resource to this file then link indirectly ('[description][id-of-external-resource]').
  Typically you would do the latter only when the FAQ contains more than one link to that external resource.
-->

<p><!-- special resources -->
<!-- /wiki/faq/index = 'C++ FAQ' -->
<!-- /wiki/faq/big-picture = 'Big Picture Issues' -->
<!-- /wiki/faq/classes-and-objects = 'Classes and Objects' -->
<!-- /wiki/faq/references = 'References' -->
<!-- /wiki/faq/inline-functions = 'Inline Functions' -->
<!-- /wiki/faq/ctors = 'Constructors' -->
<!-- /wiki/faq/dtors = 'Destructors' -->
<!-- /wiki/faq/assignment-operators = 'Assignment Operators' -->
<!-- /wiki/faq/operator-overloading = 'Operator Overloading' -->
<!-- /wiki/faq/friends = 'Friends' -->
<!-- /wiki/faq/input-output = 'Input/output via <iostream> and <cstdio>' -->
<!-- /wiki/faq/freestore-mgmt = 'Memory Management' -->
<!-- /wiki/faq/exceptions = 'Exceptions and Error Handling' -->
<!-- /wiki/faq/const-correctness = 'Const Correctness' -->
<!-- /wiki/faq/big3 = 'The Big Three' -->
<!-- /wiki/faq/basics-of-inheritance = 'Inheritance — Basics' -->
<!-- /wiki/faq/virtual-functions = 'Inheritance — virtual functions' -->
<!-- /wiki/faq/proper-inheritance = 'Inheritance — Proper Inheritance and Substitutability' -->
<!-- /wiki/faq/abcs = 'Inheritance — Abstract Base Classes (ABCs)' -->
<!-- /wiki/faq/strange-inheritance = 'Inheritance — What your mother never told you' -->
<!-- /wiki/faq/private-inheritance = 'Inheritance — private and protected inheritance' -->
<!-- /wiki/faq/multiple-inheritance = 'Inheritance — Multiple and Virtual Inheritance' -->
<!-- /wiki/faq/intrinsic-types = 'Built-in / Intrinsic / Primitive Data Types' -->
<!-- /wiki/faq/coding-standards = 'Coding Standards' -->
<!-- /wiki/faq/how-to-learn-cpp = 'Learning C++' -->
<!-- /wiki/faq/newbie = 'Newbie Questions & Answers' -->
<!-- /wiki/faq/objective-c = 'Learning C++ if you already know Objective-C' -->
<!-- /wiki/faq/c = 'Learning C++ if you already know C' -->
<!-- /wiki/faq/csharp-java = 'Learning C++ if you already know C# or Java' -->
<!-- /wiki/faq/myths = 'Myths and Urban Legends About C++' -->
<!-- /wiki/faq/value-vs-ref-semantics = 'Reference and Value Semantics' -->
<!-- /wiki/faq/mixing-c-and-cpp = 'How to mix C and C++' -->
<!-- /wiki/faq/pointers-to-members = 'Pointers to Member Functions' -->
<!-- /wiki/faq/containers = 'Container Classes' -->
<!-- /wiki/faq/templates = 'Templates' -->
<!-- /wiki/faq/serialization = 'Serialization and Unserialization' -->
<!-- /wiki/faq/class-libraries = 'Class Libraries' -->
<!-- /wiki/faq/compiler-dependencies = 'Compiler Dependencies' -->
<!-- /wiki/faq/misc-technical-issues = 'Miscellaneous Technical Issues' -->
<!-- /wiki/faq/misc-environmental-issues = 'Miscellaneous Environmental Issues' -->
<!-- /wiki/faq/style-and-techniques = 'Miscellaneous Style Issues' -->
<!-- /wiki/faq/user-groups-worldwide = 'User Groups Worldwide' -->
<!-- /wiki/faq/cpp11 = 'C++11 Overview' -->
<!-- /wiki/faq/cpp11-language = 'C++11 Language Extensions --- General Features' -->
<!-- /wiki/faq/cpp11-language-classes = 'C++11 Language Extensions -- Classes' -->
<!-- /wiki/faq/cpp11-language-concurrency = 'C++11 Language Extensions --- Concurrency' -->
<!-- /wiki/faq/cpp11-language-misc = 'C++11 Language Extensions --- Miscellaneous Language Features' -->
<!-- /wiki/faq/cpp11-language-templates = 'C++11 Language Extensions -- Templates' -->
<!-- /wiki/faq/cpp11-language-types = 'C++11 Language Extensions --- Other Types' -->
<!-- /wiki/faq/cpp11-library = 'C++11 Library Extensions --- General Libraries' -->
<!-- /wiki/faq/cpp11-library-concurrency = 'C++11 Standard Library Extensions --- Concurrency' -->
<!-- /wiki/faq/cpp11-library-stl = 'C++11 Standard Library Extensions --- Containers and Algorithms' -->
<!-- /wiki/faq/cpp0x-concepts-history = 'C++0x Concepts --- Historical FAQs' -->
<!-- /wiki/faq/cpp14 = 'C++14 Overview' -->
<!-- /wiki/faq/cpp14-language = 'C++14 Language Extensions' -->
<!-- /wiki/faq/cpp14-library = 'C++14 Library Extensions' -->
<!-- /wiki/faq/wg21 = 'WG21 Members' -->
<!-- /wiki/faq/subject-index = 'Subject Index' --></p>

<!-- BEGIN 'Category' Namespace Stuff -->


<!-- END 'Category' Namespace Stuff -->


<!-- BEGIN Categories for Page -->


<!-- END Categories for Page -->


</div>


          </div>

        </article>

      </div>
      
<div id="popup-suggest" class="wiki-popup">
  <p>Please <a href="../../member/login.html">Login</a> to submit a recommendation.</p>
  <p>If you don&rsquo;t have an account, you can <a href="../../member/register.html">register for free.</a></p>
</div>

        </div>
        
        <div id="root-footer"></div>
      </div>
    </div>

    <footer id="bottom" role="contentinfo">
      <div class="container">
        &copy; <a href="../../home/terms-of-use.html">Copyright</a> 2015 Standard C++ Foundation. 
        All rights reserved. 
        <ul id="nav-sub">
<li class="first"><a href="../../home/terms-of-use.html">Terms of Use</a></li>
<li class="last"><a href="../../home/privacy-policy.html">Privacy Policy</a></li>
</ul>
      </div>
    </footer>

    <script src="../../../ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../javascript/jquery.html"><\/script>')</script>
    <script src="../../../ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script>
    <script>window.jQuery.ui || document.write('<script src="../../javascript/jquery-ui.html"><\/script>')</script>
    
    <script type="text/javascript" charset="utf-8" src="../../index97fd.html?ACT=comment_editor"></script>
    <script type="text/javascript">
	        					$(document).ready(function() {
									$("*[id^=likee_]").click(function(){
										var ids = $(this).attr("id").split("_");
										if (ids[1]=="c"){
											id=ids[2];
											c="c_";
											isCom="true";
										} else {
											id=ids[1];
											c="";
											isCom="false";
										}
										
										$.ajax({
	   										type: "POST",
	   										url: "/wiki/faq/misc-technical-issues",
	   										data: "likee=true&entry_id="+id+"&isCom="+isCom,
	   										success: function(msg){
	     										//alert( "Data Saved: " + msg );
	   										}
	 									});
	 									
	 									$(this).replaceWith("<strong>"+$(this).html()+"</strong>");
	 									$("#dislikee_"+c+id).replaceWith("<span>"+$("#dislikee_"+c+id).html()+"</span>");
	 									$("#scoreeCount_"+c+id).html(parseInt($("#scoreeCount_"+c+id).html())+1);
	 									$("#likeeCount_"+c+id).html(parseInt($("#likeeCount_"+c+id).html())+1);
	 									$("#likeeReplace_"+c+id).replaceWith("");
	 									$("#likeeShow_"+c+id).replaceWith($("#likeeShow_"+c+id).html());
									});
									
									$("*[id^=dislikee_]").click(function(){
										var ids = $(this).attr("id").split("_");
										if (ids[1]=="c"){
											id=ids[2];
											c="c_";
											isCom="true";
										} else {
											id=ids[1];
											c="";
											isCom="false";
										}
										$.ajax({
	   										type: "POST",
	   										url: "/wiki/faq/misc-technical-issues",
	   										data: "dislikee=true&entry_id="+id+"&isCom="+isCom,
	   										success: function(msg){
	     										//alert( "Data Saved: " + msg );
	   										}
	 									});
	 									
	 									$(this).replaceWith("<strong>"+$(this).html()+"</strong>");
	 									$("#likee_"+c+id).replaceWith("<span>"+$("#likee_"+c+id).html()+"</span>");
	 									$("#scoreeCount_"+c+id).html(parseInt($("#scoreeCount_"+c+id).html())-1);
	 									$("#dislikeeCount_"+c+id).html(parseInt($("#dislikeeCount_"+c+id).html())+1);
	 									$("#likeeReplace_"+c+id).replaceWith("");
	 									$("#likeeShow_"+c+id).replaceWith($("#likeeShow_"+c+id).html());
									});
								
								});	
	        			  </script>
    
    <script type="text/javascript" src="../../js/isocpp.min.js"></script>
    
    <script type="text/javascript" src="../../js/magnific.min.js"></script>
    <script type="text/javascript" src="../../js/qtip.min.js"></script>
    <script type="text/javascript" src="../../themes/wiki_themes/isocpp/javascript/wiki57ff.js?v=20140115"></script>
    
    <script type="text/javascript">
      $("#top nav a").each(function() {
        var aSeg1 = $(this).attr("href").replace("http://", "").replace("https:///", "").split("../../index.html")[1];
        if (aSeg1 == "wiki") {$(this).parent().addClass("here");}
      });
    </script>

  </body>

<!-- Mirrored from isocpp.org/wiki/faq/misc-technical-issues by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 01 Aug 2015 12:41:46 GMT -->
</html>