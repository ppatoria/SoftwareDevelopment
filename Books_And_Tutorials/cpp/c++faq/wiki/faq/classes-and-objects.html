<!doctype html>
<html lang="en">
  
<!-- Mirrored from isocpp.org/wiki/faq/classes-and-objects by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 01 Aug 2015 12:41:42 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <title>
            Standard C++
    </title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link href="../../favicon.ico" rel="shortcut icon" />
    <link rel="apple-touch-icon" href="apple-touch-icon-57.html" />
    <link rel="apple-touch-icon" sizes="72x72" href="apple-touch-icon-72.html" />
    <link rel="apple-touch-icon" sizes="114x114" href="apple-touch-icon-114.html" />
    <link rel="apple-touch-icon" sizes="144x144" href="apple-touch-icon-144.html" />
    
    <link href="../../indexe9db.html?css=stylesheets/prettify" rel="stylesheet" media="all" type="text/css" />
    <script type="text/javascript" src="../../../cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
    
    <link href="../../index6bd3.html?css=stylesheets/screen" rel="stylesheet" media="all" type="text/css" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <script src="../../mint/index3298.html?js" type="text/javascript"></script>
    
    <script type="text/javascript" src="../../../use.typekit.com/kml7swa.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
    
  </head>
  
  <body class="hide-sidebar">
    <div id="root">
    
      <div id="crown">
        <a id="sidebar-toggle" href="#sidebar">Show sidebar &raquo;</a>
        <ul class="user">
                          <li><a href="../../member/login.html">Sign In</a></li>
          <li><a href="../../member/register.html">Register</a></li>
                </ul>
      </div>

      <header id="top" role="banner">
        <div class="container">
          <h1>
            <a href="../../index.html"><img src="../../images/uploads/logo-sun.jpg" alt="Standard C++" /></a>
          </h1>
          <nav role="navigation">
            <ul id="nav-sub">
<li class="first"><a href="../../get-started.html">Get Started!</a></li>
<li><a href="../../tour.html">Tour</a></li>
<li><a href="../../faq.html">C++ Super-FAQ</a></li>
<li><a href="../../blog.html">Blog</a></li>
<li><a href="../../forums.html">Forums</a></li>
<li><a href="../../std.html">Standardization</a></li>
<li class="last"><a href="../../about.html">About</a></li>
</ul>
          </nav>
          <form action="https://isocpp.org/search/google">
            <input type="text" name="q" id="q" maxlength="100" value="" class="textbox" />
            <input type="submit" value="Search" class="button" />
          </form>
          <!--
          <form method="post" action="https://isocpp.org/"  >
<div class='hiddenFields'>
<input type="hidden" name="ACT" value="6" />
<input type="hidden" name="XID" value="4ea1026636f0ea96616586e4927ed69dc5b1e022" />
<input type="hidden" name="RES" value="" />
<input type="hidden" name="meta" value="zYMKgX58Zs8+1aclN9tC7heLzqeMS/BIDf2KWaqfUPy9IuEVYHdFD1dlGh34VWoTLfYfqx2VVNOeAsrIgIvvoFDyH5RKx1rRrjSIJmrlV4WTNhwE+/Onu3ISLsbzAk2awqSU6A+hVvt+f/zJn30d7+qnYdsX9iFLWu40TELdyhIN7OvZg7LuJknFB0gZ7nQTklJ/9coWuk9SURbQpuERR2hTSI2C5xLtlwfiI61PqkKwyrlOKG6XDMBSEtvAIHOCp+adyiqHkYhNSPC8wgrdUEXu/O1ACVY3yqa/hYv3qY5COcgp3UflhKiNqQvGfAikDLrb28Jq5FJxzSTO4kcq1kRWnkMAIa+DJDX1Ri9lxnSoesPEDjJwSIcqjcXXIxh1l0qg2xNSdmuOrE+KB+C8x3zG6M/Rmrrfc9CHMGWIs3c=" />
<input type="hidden" name="site_id" value="1" />
</div>


            <input type="text" name="keywords" id="keywords" maxlength="100" value="M50o93H7pQ09L8X1t49cHY01Z5j4TT91fGfr" class="textbox" />
            <input type="submit" value="Search" class="button" />
          </form>
          -->
        </div>
      </header>

      <div id="content" class="hide-sidebar" role="main">
        <div class="container">
    
      <div id="sidebar">
              <section>
              <header>Features</header>
            <div class="sidebar-section-content prettify">
        <p style="text-align: center;">
	&nbsp;</p>
<p>
	<a href="https://github.com/cplusplus/draft"><img alt="" src="../../images/uploads/github.png" style="width: 90px; height: 48px; margin-right: 5px; margin-left: 5px; float: right;" /></a><a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2015/n4527.pdf"><strong>Working Draft</strong> of the next&nbsp;standard</a></p>
<p>
	&nbsp;</p>
<p>
	<a href="../../std/status.html">Current ISO C++ status</a></p>
<p>
	&nbsp;</p>
<p>
	<a href="../../std/meetings-and-participation/upcoming-meetings.html">Upcoming ISO C++ meetings</a></p>
<p>
	&nbsp;</p>
<p>
	<a href="http://en.cppreference.com/w/cpp/compiler_support">Compiler conformance status</a></p>
      </div>
    </section>
  
  
  
        <nav>
          <section>
            <header>
              Navigation
            </header>
            <ul>
              <li><a href="../faq.html">FAQ Home</a></li>
              <li><a href="../../themes/wiki_themes/isocpp/rss/faq-revisions-rss.php" class="icon rss">FAQ RSS Feed</a></li>
              <li><a href="editinfo.html">FAQ Help</a></li>
                          </ul>
          </section>
        
        
          <section>
            <header>
              Search this Wiki
            </header>
            <form method="post" action="https://isocpp.org/wiki/faq/Special:Search_results">
              <input type="hidden" name="XID" value="9d3d71b85fadc7c869632c67d28dd9e613e5073c" />
              <input type="text" class="input" name="keywords" size="20" value="" maxlength="80" /><input type="submit" class="submit" value="Go" />
            </form>
          </section>
          
          <section>
            <header>
              Go to Page
            </header>
            <form method="post" action="https://isocpp.org/wiki/faq/Special:Find_page">
              <input type="hidden" name="XID" value="1e76e3268c1746ebf04c4cfb329ec47f46174341" />
              <input type="text" class="input" name="title" size="20" value="" maxlength="80" /><input type="submit" class="submit" value="Go" />
            </form>
          </section>
        </nav>
          
      <section>
              <header>Upcoming Events</header>
            <div class="sidebar-section-content prettify">
        <p>
	<a href="http://cppcon.org/" style="line-height: 1;"><strong>CppCon 2015</strong></a></p>
<p>
	<span style="line-height: 1;">Sep 19-20 (boot camp)</span></p>
<p>
	<span style="line-height: 1;">Sep 20-25 (conference)</span></p>
<p>
	<span style="line-height: 1;">Bellevue, WA, USA</span></p>
<p>
	&nbsp;</p>
<p>
	<span style="line-height: 1;"><a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2015/n4544.htm"><strong>ISO C++ Fall Meeting</strong></a> <a href="../../files/papers/n4545.html">(agenda)</a></span></p>
<p>
	Oct 19-24,&nbsp;<span style="line-height: 1;">Kona, HI, USA</span></p>
<p>
	&nbsp;</p>
<p>
	<a href="http://meetingcpp.com/index.php/meetingcpp-2015.html"><strong>Meeting C++ 2015</strong></a></p>
<p>
	Dec 4-5, Berlin, Germany</p>
<p>
	&nbsp;</p>
      </div>
    </section>
  
      <section>
            <div class="sidebar-section-content prettify">
        <div class="twitter-container">
	<a class="twitter-timeline" data-dnt="true" data-widget-id="344512921423998976" href="https://twitter.com/isocpp">Tweets by @isocpp</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></div>
      </div>
    </section>
  
      </div>

      <div id="mainbar">
        <header>
          <div class="breadcrumbs">

            <a href="../faq.html">Wiki Home</a>
            <span class="breadcrumbspacer">&nbsp;&nbsp;&gt;&nbsp;&nbsp;</span>

                        classes and objects
            
          </div>
          
          <div class="wiki-page-actions">
                    <a href="classes-and-objects.html">View</a>
                              </div>
          
          <h2>
                    
          
                    
                    classes and objects
                    </h2>

          <div class="save-to-reader wiki">
            <div class="title">Save to:</div>
            <a href="http://www.instapaper.com/hello2?url={url}&amp;title=classes%20and%20objects" class="icon instapaper">Instapaper</a>
            <a href="http://getpocket.com/create?url={url}&amp;action=save&amp;k=3aNp2F20Aao4bvW884g224eUfud1nfI0" class="icon pocket">Pocket</a>
            <a href="#" class="icon readability">Readability</a>
            <div class="rdbWrapper" data-show-read="1" data-show-send-to-kindle="1" data-show-print="1" data-show-email="1" data-orientation="0" data-version="1" data-bg-color="#ffffff"></div><script type="text/javascript">(function() {var s = document.getElementsByTagName("script")[0],rdb = document.createElement("script"); rdb.type = "text/javascript"; rdb.async = true; rdb.src = document.location.protocol + "//www.readability.com/embed.js"; s.parentNode.insertBefore(rdb, s); })();</script>
          </div>
          
        </header>

        <article>

          <!-- Begin Main Content of Page -->

          
          

          <div id="wiki-content">

          

          <div class="prettify">


<h2 id="classes-and-objects">Classes and Objects</h2>

<h3 id="overview-class">What is a class?</h3>

<p>The fundamental building block of OO software.</p>

<p>A <code>class</code> defines a data type, much like a <code>struct</code> would be in C. In a computer science sense, a type consists of both
a set of states <em>and</em> a set of operations which transition between those states. Thus <code>int</code> is a type because it has
both a set of states <em>and</em> it has operations like <code>i + j</code> or <code>i++</code>, etc. In exactly the same way, a <code>class</code> provides a
set of (usually <code>public</code>) operations, and a set of (usually non-<code>public</code>) data bits representing the abstract values
that instances of the type can have.</p>

<p>You can imagine that <code>int</code> is a <code>class</code> that has member functions called <code>operator++</code>, etc. (<code>int</code> isn&#8217;t really a
<code>class</code>, but the basic analogy is this: a <code>class</code> is a type, much like <code>int</code> is a type.)</p>

<p>Note: a C programmer can think of a <code>class</code> as a C <code>struct</code> whose members default to <code>private</code>. But if that&#8217;s all you
think of a <code>class</code>, then you probably need to experience a personal paradigm shift.</p>

<h3 id="overview-object">What is an object?</h3>

<p>A region of storage with associated semantics.</p>

<p>After the declaration <code>int i;</code> we say that &#8220;<code>i</code> is an object of type <code>int</code>.&#8221; In OO/C++, &#8220;object&#8221; usually means &#8220;an
instance of a class.&#8221; Thus a class defines the behavior of possibly many objects (instances).</p>

<h3 id="good-interfaces">When is an interface &#8220;good&#8221;?</h3>

<p>When it provides a <em>simplified view</em> of a chunk of software, and it is expressed in the <em>vocabulary of a user</em> (where a
&#8220;chunk&#8221; is normally a class or a <a href="friends.html#friends-and-encap" title="FAQ: Do friends violate encapsulation?">tight group of classes</a>, and a &#8220;user&#8221; is another developer rather
than the ultimate customer).</p>

<ul>
<li>The &#8220;simplified view&#8221; means unnecessary details are intentionally hidden. This reduces the user&#8217;s defect-rate.</li>
<li>The &#8220;vocabulary of users&#8221; means users don&#8217;t need to learn a new set of words and concepts. This reduces the user&#8217;s
learning curve.</li>
</ul>

<h3 id="encapsulation">What is encapsulation?</h3>

<p>Preventing unauthorized access to some piece of information or functionality.</p>

<p>The key money-saving insight is to separate the volatile part of some chunk of software from the stable part.
Encapsulation puts a firewall around the chunk, which prevents other chunks from accessing the volatile parts; other
chunks can only access the stable parts. This prevents the other chunks from breaking if (when!) the volatile parts are
changed. In context of OO software, a &#8220;chunk&#8221; is normally a class or a <a href="friends.html#friends-and-encap" title="FAQ: Do friends violate encapsulation?">tight group of classes</a>.</p>

<p>The &#8220;volatile parts&#8221; are the implementation details. If the chunk is a single class, the volatile part is normally
encapsulated using the <a href="basics-of-inheritance.html#access-rules" title="FAQ: What's the difference between public, private, and protected?"><code>private</code> and/or <code>protected</code> keywords</a>. If the chunk is a <a href="friends.html#friends-and-encap" title="FAQ: Do friends violate encapsulation?">tight group of
classes</a>, encapsulation can be used to deny access to entire classes in that group.
<a href="basics-of-inheritance.html" title="Section: Inheritance — Basics">Inheritance</a> can also be used as <a href="abcs.html#interface-vs-implem-abcs" title="FAQ: How do I separate interface from implementation in C++ (like Modula-2)?">a form of encapsulation</a>.</p>

<p>The &#8220;stable parts&#8221; are the interfaces. A good interface provides a <a href="classes-and-objects.html#good-interfaces" title="FAQ: When is an interface 'good'?">simplified view in the vocabulary of a
user</a>, and is designed <a href="operator-overloading.html#design-interfaces-first" title="FAQ: Should I design my classes from the outside (interfaces first) or from the inside (data first)?">from the outside-in</a> (here a &#8220;user&#8221; means another
developer, not the end-user who buys the completed application). If the chunk is a single class, the interface is
simply the class&#8217;s <code>public</code> member functions and <a href="friends.html" title="Section: Friends"><code>friend</code></a> functions. If the chunk is a <a href="friends.html#friends-and-encap" title="FAQ: Do friends violate encapsulation?">tight group of
classes</a>, the interface can include several of the classes in the chunk.</p>

<p>Designing a clean interface and <a href="abcs.html#overview-interface-vs-implem" title="FAQ: What's the big deal of separating interface from implementation?">separating that interface from its implementation</a> merely
<em>allows</em> users to use the interface. But encapsulating (putting &#8220;in a capsule&#8221;) the implementation <em>forces</em> users to use
the interface.</p>

<h3 id="safety-vs-usability">How does C++ help with the tradeoff of safety vs. usability?</h3>

<p>In C, <a href="classes-and-objects.html#encapsulation" title="FAQ: What is encapsulation?">encapsulation</a> was accomplished by making things <code>static</code> in a compilation unit or module. This
prevented another module from accessing the <code>static</code> stuff. (By the way, <code>static</code> data at file-scope is now deprecated
in C++: don&#8217;t do that.)</p>

<p>Unfortunately this approach doesn&#8217;t support multiple instances of the data, since there is no direct support for making
multiple instances of a module&#8217;s <code>static</code> data. If multiple instances were needed in C, programmers typically used a
<code>struct</code>. But unfortunately C <code>struct</code>s don&#8217;t support <a href="classes-and-objects.html#encapsulation" title="FAQ: What is encapsulation?">encapsulation</a>. This exacerbates the tradeoff
between safety (information hiding) and usability (multiple instances).</p>

<p>In C++, you can have both multiple instances and encapsulation via a class. The <code>public</code> part of a class contains the
class&#8217;s interface, which normally consists of the class&#8217;s <code>public</code> member functions and its <a href="friends.html" title="Section: Friends"><code>friend</code></a>
functions. The <a href="basics-of-inheritance.html#access-rules" title="FAQ: What's the difference between public, private, and protected?"><code>private</code> and/or <code>protected</code></a> parts of a class contain the class&#8217;s implementation, which
is typically where the data lives.</p>

<p>The end result is like an &#8220;encapsulated <code>struct</code>.&#8221; This reduces the tradeoff between safety (information hiding) and
usability (multiple instances).</p>

<h3 id="encap-is-for-code-not-people">How can I prevent other programmers from violating encapsulation by seeing the <code>private</code> parts of my class?</h3>

<p>Not worth the effort &#8212; encapsulation is for code, not people.</p>

<p>It doesn&#8217;t violate encapsulation for a <em>programmer</em> to see the <a href="basics-of-inheritance.html#access-rules" title="FAQ: What's the difference between public, private, and protected?"><code>private</code> and/or <code>protected</code></a> parts of
your class, so long as they don&#8217;t write code that somehow depends on what they saw. In other words, encapsulation
doesn&#8217;t prevent <em>people</em> from knowing about the inside of a class; it prevents the <em>code</em> they write from becoming
dependent on the insides of the class. Your company doesn&#8217;t have to pay a &#8220;maintenance cost&#8221; to maintain the gray matter
between your ears; but it does have to pay a maintenance cost to maintain the code that comes out of your finger tips.
What you know as a person doesn&#8217;t increase maintenance cost, provided the code you write depends on the interface rather
than the implementation.</p>

<p>Besides, this is rarely if ever a problem. I don&#8217;t know any programmers who have intentionally tried to access the
<code>private</code> parts of a class. &#8220;My recommendation in such cases would be to change the programmer, not the code&#8221; &#91;<a href="mailto:(NOSPAM)kanze(AT)gabi(DASH)soft(DOT)fr">James
Kanze</a>; used with permission].</p>

<h3 id="directly-access-private-in-other-instances">Can a method directly access the non-<code>public</code> members of another instance of its class?</h3>

<p>Yes.</p>

<p>The name <code>this</code> is not special. Access is granted or denied based on the <em>class</em> of the reference/pointer/object, not
based on the <em>name</em> of the reference/pointer/object. (See below for the fine print.)</p>

<p>The fact that C++ allows a class&#8217; methods and friends to access the non-<code>public</code> parts of <em>all</em> its objects, not just
the <code>this</code> object, seems at first to weaken encapsulation. However the opposite is true: this rule preserves
encapsulation. Here&#8217;s why.</p>

<p>Without this rule, most non-<code>public</code> members would need a <code>public</code> <em>get</em> method, because many classes have at least one
method or friend that takes an explicit argument (i.e., an argument not called <code>this</code>) of its own class.</p>

<p>Huh? (you ask). Let&#8217;s kill the mumbo jumbo and work out an example:</p>

<p>Consider assignment operator <code>Foo::operator=(const Foo&amp; x)</code>. This assignment operator will probably change the data
members in the left-hand argument, <code>*this</code>, based on the data members in the right-hand argument, <code>x</code>. Without the
C++ rule being discussed here, the only way for that assignment operator to access the non-<code>public</code> members of <code>x</code>
would be for class <code>Foo</code> to provide a <code>public</code> <em>get</em> method for every non-<code>public</code> datum. That would suck bigtime.
(NB: &#8220;suck bigtime&#8221; is a precise, sophisticated, technical term; and I am writing this on April 1.)</p>

<p>The assignment operator isn&#8217;t the only one that would weaken encapsulation were it not for this rule. Here is a
partial(!) list of others:</p>

<ul>
<li>Copy constructor.</li>
<li>Comparison operators: <code>==</code>, <code>!=</code>, <code>&lt;=</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&gt;</code>.</li>
<li>Binary arithmetic operators: <code>x+y</code>, <code>x-y</code>, <code>x*y</code>, <code>x/y</code>, <code>x%y</code>.</li>
<li>Binary bitwise operators: <code>x^y</code>, <code>x&amp;y</code>, <code>x|y</code>.</li>
<li>Static methods that accepts an instance of the class as a parameter.</li>
<li>Static methods that creates/manipulates an instance of the class.</li>
<li>etc.</li>
</ul>

<p>Conclusion: encapsulation would be shredded without this beneficial rule: most non-<code>public</code> members of most classes
would end up having a <code>public</code> <em>get</em> method.</p>

<p><em>The Fine Print:</em> There is another rule that is related to the above: methods and friends of a derived class can
access the <code>protected</code> base class members of any of its own objects (any objects of its class or any derived class of
its class), but not others. Since that is hopelessly opaque, here&#8217;s an example: suppose classes <code>D1</code> and <code>D2</code> inherit
directly from class <code>B</code>, and base class <code>B</code> has <code>protected</code> member <code>x</code>. The compiler will let <code>D1</code>&#8217;s members and friends
directly access the <code>x</code> member of any object it knows to be at least a <code>D1</code>, such as via a <code>D1*</code> pointer, a <code>D1&amp;</code>
reference, a <code>D1</code> object, etc. However the compiler will give a compile-time error if a <code>D1</code> member or friend tries to
directly access the <code>x</code> member of anything it does not know is at least a <code>D1</code>, such as via a <code>B*</code> pointer, a <code>B&amp;</code>
reference, a <code>B</code> object, a <code>D2*</code> pointer, a <code>D2&amp;</code> reference, a <code>D2</code> object, etc. By way of (imperfect!!) analogy, you
are allowed to pick your own pockets, but you are not allowed to pick your father&#8217;s pockets nor your brother&#8217;s pockets.</p>

<h3 id="encap-is-not-security">Is Encapsulation a Security device?</h3>

<p>No.</p>

<p>Encapsulation <code>!=</code> security.</p>

<p>Encapsulation prevents mistakes, not espionage.</p>

<h3 id="struct-vs-class">What&#8217;s the difference between the keywords <code>struct</code> and <code>class</code>?</h3>

<p>The members and base classes of a <code>struct</code> are <code>public</code> by default, while in <code>class</code>, they default to <code>private</code>. Note:
you should make your base classes <em>explicitly</em> <code>public</code>, <code>private</code>, or <code>protected</code>, rather than relying on the defaults.</p>

<p><code>struct</code> and <code>class</code> are otherwise functionally equivalent.</p>

<p>Enough of that squeaky clean techno talk. Emotionally, most developers make a strong distinction between a <code>class</code> and a
<code>struct</code>. A <code>struct</code> simply <em>feels</em> like an open pile of bits with very little in the way of encapsulation or
functionality. A <code>class</code> <em>feels</em> like a living and responsible member of society with intelligent services, a strong
encapsulation barrier, and a well defined interface. Since that&#8217;s the connotation most people already have, you should
probably use the <code>struct</code> keyword if you have a class that has very few methods and has <code>public</code> data (such things <em>do</em>
exist in well designed systems!), but otherwise you should probably use the <code>class</code> keyword.</p>

<h3 id="in-class-constant">How do I define an in-class constant?</h3>

<p>If you want a constant that you can use in a compile time constant expression, say as an array bound, use <code>constexpr</code> if your compiler supports that C++11 feature, otherwise you have two other choices:</p>

<pre><code>class X {
    constexpr int c1 = 42; // preferred
    static const int c2 = 7;
    enum { c3 = 19 };

    array&lt;char,c1&gt; v1;
    array&lt;char,c2&gt; v2;
    array&lt;char,c3&gt; v3;

    // ...
};
</code></pre>

<p>You have more flexibility if the constant isn&#8217;t needed for use in a compile time constant expression:</p>

<pre><code>    class Z {
        static char* p;     // initialize in definition
        const int i;        // initialize in constructor
    public:
        Z(int ii) :i(ii) { }
    };

    char* Z::p = "hello, there";
</code></pre>

<p>You can take the address of a static member if (and only if) it has an out-of-class definition:</p>

<pre><code>    class AE {
        // ...
    public:
        static const int c6 = 7;
        static const int c7 = 31;
    };

    const int AE::c7;   // definition

    int f()
    {
        const int* p1 = &amp;AE::c6;    // error: c6 not an lvalue
        const int* p2 = &amp;AE::c7;    // ok
        // ...
    }
</code></pre>

<h3 id="data-in-class">Why do I have to put the data in my class declarations?</h3>

<p>You don&#8217;t. If you don&#8217;t want data in an interface, don&#8217;t put it in the class that defines the interface. Put it in derived classes instead. See, <a href="misc-technical-issues.html#abstract-class" title="FAQ: Why do my compiles take so long?">Why do my compiles take so long?</a>.</p>

<p>Sometimes, you do want to have representation data in a class. Consider class <code>complex</code>:</p>

<pre><code>    template&lt;class Scalar&gt; class complex {
    public:
        complex() : re(0), im(0) { }
        complex(Scalar r) : re(r), im(0) { }
        complex(Scalar r, Scalar i) : re(r), im(i) { }
        // ...

        complex&amp; operator+=(const complex&amp; a)
            { re+=a.re; im+=a.im; return *this; }
        // ...
    private:
        Scalar re, im;
    };
</code></pre>

<p>This type is designed to be used much as a built-in type and the representation is needed in the declaration to make it possible to create genuinely local objects (i.e. objects that are allocated on the stack and not on a heap) and to ensure proper inlining of simple operations. Genuinely local objects and inlining is necessary to get the performance of complex close to what is provided in languages with a built-in complex type.</p>

<h3 id="layout-obj">How are C++ objects laid out in memory?</h3>

<p>Like C, C++ doesn&#8217;t define layouts, just semantic constraints that must be met. Therefore different implementations do things differently. One good explanation is in a book that is otherwise outdated and doesn&#8217;t describe any current C++ implementation: <a href="http://stroustrup.com/arm.html">The Annotated C++ Reference Manual</a> (usually called the ARM). It has diagrams of key layout examples. There is a very brief explanation in Chapter 2 of <a href="http://stroustrup.com/3rd.html">TC++PL3</a>.</p>

<p>Basically, C++ constructs objects simply by concatenating sub objects. Thus</p>

<pre><code>        struct A { int a,b; };
</code></pre>

<p>is represented by two <code>int</code>s next to each other, and</p>

<pre><code>        struct B : A { int c; };
</code></pre>

<p>is represented by an <code>A</code> followed by an <code>int</code>; that is, by three <code>int</code>s next to each other.</p>

<p>Virtual functions are typically implemented by adding a pointer (the &#8220;vptr&#8221;) to each object of a class with virtual functions. This pointer points to the appropriate table of functions (the &#8220;vtbl&#8221;). Each class has its own vtbl shared by all objects of that class.</p>

<h3 id="sizeof-empty">Why is the size of an empty class not zero?</h3>

<p>To ensure that the addresses of two different objects will be different. For the same reason, <code>new</code> always returns pointers to distinct objects. Consider:</p>

<pre><code>    class Empty { };

    void f()
    {
        Empty a, b;
        if (&amp;a == &amp;b) cout &lt;&lt; "impossible: report error to compiler supplier";

        Empty* p1 = new Empty;
        Empty* p2 = new Empty;
        if (p1 == p2) cout &lt;&lt; "impossible: report error to compiler supplier";
    }   
</code></pre>

<p>There is an interesting rule that says that an empty base class need not be represented by a separate byte:</p>

<pre><code>    struct X : Empty {
        int a;
        // ...
    };

    void f(X* p)
    {
        void* p1 = p;
        void* p2 = &amp;p-&gt;a;
        if (p1 == p2) cout &lt;&lt; "nice: good optimizer";
    }
</code></pre>

<p>This optimization is safe and can be most useful. It allows a programmer to use empty classes to represent very simple concepts without overhead. Some current compilers provide this &#8220;empty base class optimization&#8221;.</p>

<p>Moreover, &#8220;empty base class optimization&#8221; is no longer an optional optimization but a mandatory requirement on class layout as of C++11. Go beat up on your compiler vendor if it does not implement it properly.</p>

<!--
File: id-defns

Defines IDs for each FAQ and section.

Rule:
  FAQ editors should always use these IDs for every internal cross-reference within the FAQ.
  Always use indirect links ('[description][id-of-target]')  when linking to the FAQ from within the FAQ.
  Never  use  direct  links ('[description](url-of-target)') when linking to the FAQ from within the FAQ.

Reason:
  The FAQ is a living document -- we will split/join sections and move FAQs between sections.
  Those changes result in changes to the URL of the moved FAQs, which breaks all direct links -- many changes.
  However using indirect links means we need only change one thing in one place: this id-defns file.

Caveat:
  This rule applies only to internal cross-reference links, not to links to resources outside the FAQ.
  E.g., if you are making a link from FAQ 'x' to FAQ 'y', then you should always use FAQ 'y's link-ID.
  However if you are making a link from FAQ 'x' to some resource outside the FAQ, you have two choices:
  You can use a direct link to the external resource's URL ('[description](url-of-external-resource)'),
  or you can add the external resource to this file then link indirectly ('[description][id-of-external-resource]').
  Typically you would do the latter only when the FAQ contains more than one link to that external resource.
-->

<p><!-- special resources -->
<!-- /wiki/faq/index = 'C++ FAQ' -->
<!-- /wiki/faq/big-picture = 'Big Picture Issues' -->
<!-- /wiki/faq/classes-and-objects = 'Classes and Objects' -->
<!-- /wiki/faq/references = 'References' -->
<!-- /wiki/faq/inline-functions = 'Inline Functions' -->
<!-- /wiki/faq/ctors = 'Constructors' -->
<!-- /wiki/faq/dtors = 'Destructors' -->
<!-- /wiki/faq/assignment-operators = 'Assignment Operators' -->
<!-- /wiki/faq/operator-overloading = 'Operator Overloading' -->
<!-- /wiki/faq/friends = 'Friends' -->
<!-- /wiki/faq/input-output = 'Input/output via <iostream> and <cstdio>' -->
<!-- /wiki/faq/freestore-mgmt = 'Memory Management' -->
<!-- /wiki/faq/exceptions = 'Exceptions and Error Handling' -->
<!-- /wiki/faq/const-correctness = 'Const Correctness' -->
<!-- /wiki/faq/big3 = 'The Big Three' -->
<!-- /wiki/faq/basics-of-inheritance = 'Inheritance — Basics' -->
<!-- /wiki/faq/virtual-functions = 'Inheritance — virtual functions' -->
<!-- /wiki/faq/proper-inheritance = 'Inheritance — Proper Inheritance and Substitutability' -->
<!-- /wiki/faq/abcs = 'Inheritance — Abstract Base Classes (ABCs)' -->
<!-- /wiki/faq/strange-inheritance = 'Inheritance — What your mother never told you' -->
<!-- /wiki/faq/private-inheritance = 'Inheritance — private and protected inheritance' -->
<!-- /wiki/faq/multiple-inheritance = 'Inheritance — Multiple and Virtual Inheritance' -->
<!-- /wiki/faq/intrinsic-types = 'Built-in / Intrinsic / Primitive Data Types' -->
<!-- /wiki/faq/coding-standards = 'Coding Standards' -->
<!-- /wiki/faq/how-to-learn-cpp = 'Learning C++' -->
<!-- /wiki/faq/newbie = 'Newbie Questions & Answers' -->
<!-- /wiki/faq/objective-c = 'Learning C++ if you already know Objective-C' -->
<!-- /wiki/faq/c = 'Learning C++ if you already know C' -->
<!-- /wiki/faq/csharp-java = 'Learning C++ if you already know C# or Java' -->
<!-- /wiki/faq/myths = 'Myths and Urban Legends About C++' -->
<!-- /wiki/faq/value-vs-ref-semantics = 'Reference and Value Semantics' -->
<!-- /wiki/faq/mixing-c-and-cpp = 'How to mix C and C++' -->
<!-- /wiki/faq/pointers-to-members = 'Pointers to Member Functions' -->
<!-- /wiki/faq/containers = 'Container Classes' -->
<!-- /wiki/faq/templates = 'Templates' -->
<!-- /wiki/faq/serialization = 'Serialization and Unserialization' -->
<!-- /wiki/faq/class-libraries = 'Class Libraries' -->
<!-- /wiki/faq/compiler-dependencies = 'Compiler Dependencies' -->
<!-- /wiki/faq/misc-technical-issues = 'Miscellaneous Technical Issues' -->
<!-- /wiki/faq/misc-environmental-issues = 'Miscellaneous Environmental Issues' -->
<!-- /wiki/faq/style-and-techniques = 'Miscellaneous Style Issues' -->
<!-- /wiki/faq/user-groups-worldwide = 'User Groups Worldwide' -->
<!-- /wiki/faq/cpp11 = 'C++11 Overview' -->
<!-- /wiki/faq/cpp11-language = 'C++11 Language Extensions --- General Features' -->
<!-- /wiki/faq/cpp11-language-classes = 'C++11 Language Extensions -- Classes' -->
<!-- /wiki/faq/cpp11-language-concurrency = 'C++11 Language Extensions --- Concurrency' -->
<!-- /wiki/faq/cpp11-language-misc = 'C++11 Language Extensions --- Miscellaneous Language Features' -->
<!-- /wiki/faq/cpp11-language-templates = 'C++11 Language Extensions -- Templates' -->
<!-- /wiki/faq/cpp11-language-types = 'C++11 Language Extensions --- Other Types' -->
<!-- /wiki/faq/cpp11-library = 'C++11 Library Extensions --- General Libraries' -->
<!-- /wiki/faq/cpp11-library-concurrency = 'C++11 Standard Library Extensions --- Concurrency' -->
<!-- /wiki/faq/cpp11-library-stl = 'C++11 Standard Library Extensions --- Containers and Algorithms' -->
<!-- /wiki/faq/cpp0x-concepts-history = 'C++0x Concepts --- Historical FAQs' -->
<!-- /wiki/faq/cpp14 = 'C++14 Overview' -->
<!-- /wiki/faq/cpp14-language = 'C++14 Language Extensions' -->
<!-- /wiki/faq/cpp14-library = 'C++14 Library Extensions' -->
<!-- /wiki/faq/wg21 = 'WG21 Members' -->
<!-- /wiki/faq/subject-index = 'Subject Index' --></p>

<!-- BEGIN 'Category' Namespace Stuff -->


<!-- END 'Category' Namespace Stuff -->


<!-- BEGIN Categories for Page -->


<!-- END Categories for Page -->


</div>


          </div>

        </article>

      </div>
      
<div id="popup-suggest" class="wiki-popup">
  <p>Please <a href="../../member/login.html">Login</a> to submit a recommendation.</p>
  <p>If you don&rsquo;t have an account, you can <a href="../../member/register.html">register for free.</a></p>
</div>

        </div>
        
        <div id="root-footer"></div>
      </div>
    </div>

    <footer id="bottom" role="contentinfo">
      <div class="container">
        &copy; <a href="../../home/terms-of-use.html">Copyright</a> 2015 Standard C++ Foundation. 
        All rights reserved. 
        <ul id="nav-sub">
<li class="first"><a href="../../home/terms-of-use.html">Terms of Use</a></li>
<li class="last"><a href="../../home/privacy-policy.html">Privacy Policy</a></li>
</ul>
      </div>
    </footer>

    <script src="../../../ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../javascript/jquery.html"><\/script>')</script>
    <script src="../../../ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script>
    <script>window.jQuery.ui || document.write('<script src="../../javascript/jquery-ui.html"><\/script>')</script>
    
    <script type="text/javascript" charset="utf-8" src="../../index97fd.html?ACT=comment_editor"></script>
    <script type="text/javascript">
	        					$(document).ready(function() {
									$("*[id^=likee_]").click(function(){
										var ids = $(this).attr("id").split("_");
										if (ids[1]=="c"){
											id=ids[2];
											c="c_";
											isCom="true";
										} else {
											id=ids[1];
											c="";
											isCom="false";
										}
										
										$.ajax({
	   										type: "POST",
	   										url: "/wiki/faq/classes-and-objects",
	   										data: "likee=true&entry_id="+id+"&isCom="+isCom,
	   										success: function(msg){
	     										//alert( "Data Saved: " + msg );
	   										}
	 									});
	 									
	 									$(this).replaceWith("<strong>"+$(this).html()+"</strong>");
	 									$("#dislikee_"+c+id).replaceWith("<span>"+$("#dislikee_"+c+id).html()+"</span>");
	 									$("#scoreeCount_"+c+id).html(parseInt($("#scoreeCount_"+c+id).html())+1);
	 									$("#likeeCount_"+c+id).html(parseInt($("#likeeCount_"+c+id).html())+1);
	 									$("#likeeReplace_"+c+id).replaceWith("");
	 									$("#likeeShow_"+c+id).replaceWith($("#likeeShow_"+c+id).html());
									});
									
									$("*[id^=dislikee_]").click(function(){
										var ids = $(this).attr("id").split("_");
										if (ids[1]=="c"){
											id=ids[2];
											c="c_";
											isCom="true";
										} else {
											id=ids[1];
											c="";
											isCom="false";
										}
										$.ajax({
	   										type: "POST",
	   										url: "/wiki/faq/classes-and-objects",
	   										data: "dislikee=true&entry_id="+id+"&isCom="+isCom,
	   										success: function(msg){
	     										//alert( "Data Saved: " + msg );
	   										}
	 									});
	 									
	 									$(this).replaceWith("<strong>"+$(this).html()+"</strong>");
	 									$("#likee_"+c+id).replaceWith("<span>"+$("#likee_"+c+id).html()+"</span>");
	 									$("#scoreeCount_"+c+id).html(parseInt($("#scoreeCount_"+c+id).html())-1);
	 									$("#dislikeeCount_"+c+id).html(parseInt($("#dislikeeCount_"+c+id).html())+1);
	 									$("#likeeReplace_"+c+id).replaceWith("");
	 									$("#likeeShow_"+c+id).replaceWith($("#likeeShow_"+c+id).html());
									});
								
								});	
	        			  </script>
    
    <script type="text/javascript" src="../../js/isocpp.min.js"></script>
    
    <script type="text/javascript" src="../../js/magnific.min.js"></script>
    <script type="text/javascript" src="../../js/qtip.min.js"></script>
    <script type="text/javascript" src="../../themes/wiki_themes/isocpp/javascript/wiki57ff.js?v=20140115"></script>
    
    <script type="text/javascript">
      $("#top nav a").each(function() {
        var aSeg1 = $(this).attr("href").replace("http://", "").replace("https:///", "").split("../../index.html")[1];
        if (aSeg1 == "wiki") {$(this).parent().addClass("here");}
      });
    </script>

  </body>

<!-- Mirrored from isocpp.org/wiki/faq/classes-and-objects by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 01 Aug 2015 12:41:42 GMT -->
</html>